<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DIALIBATOU BTP IMMOBILIER - Agence Immobilière Dakar Sénégal</title>
  <meta name="description" content="DIALIBATOU BTP IMMOBILIER - Votre partenaire immobilier de confiance au Sénégal. Achat, vente, location, construction à Dakar.">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>tailwind.config={theme:{extend:{colors:{gold:{500:'#D4AF37',600:'#B8973A'}}}}}</script>
  <style>
    *{font-family:'Inter',sans-serif}h1,h2,h3{font-family:'Playfair Display',serif}
    .line-clamp-1{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}
    .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .leaflet-container{z-index:1;border-radius:1rem}
  </style>
</head>
<body class="bg-white">
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect,useMemo,useRef,useCallback}=React;

// CONFIG
const CO={name:"DIALIBATOU BTP IMMOBILIER",addr:"Dakar Ouest, Foire – Cité Khandar, Villa 3",ph:["+221 77 709 61 44","+221 76 949 64 66"],email:"dialibatoubtp@gmail.com",wa:"221777096144",stats:{proj:250,cli:500,yrs:15,prop:180},adminPwd:"dialibatou2024"};
const NB=["Almadies","Mermoz","Plateau","Ouakam","Ngor","Point E","Fann","Sacré-Cœur","Liberté","Mamelles","Yoff","Saly","Mbour","Thiès","Bambilor","Pout","Tivaouane Peulh","Ndoukhoura Peulh","Niagues","Niacourap","Yène","Toubab Dialao","Ndayane","Keur Massar","Diakhaye","Kounoune","Diass","Keur Ndiaye Lo","Sindia","Malikounda","Sébikotane","Nguérigne","Gorom","Bayakh","Keur Moussa"];
const TY=["Appartement","Villa","Terrain","Bureau","Commerce"];

// TERRAINS LOTISSÉS COOPÉRATIVE (données initiales)
const LOTS_INIT=[
  {id:"lot1",loc:"Bambilor",zone:"Zone A",lots:50,dispo:35,su:200,pr:5000000,st:"Disponible",fe:["Titre foncier","Eau","Électricité","Voirie"]},
  {id:"lot2",loc:"Thiès",zone:"Cité Dialibatou",lots:100,dispo:72,su:150,pr:3500000,st:"Disponible",fe:["Titre foncier","Eau","Électricité"]},
  {id:"lot3",loc:"Diass",zone:"Proche AIBD",lots:80,dispo:45,su:250,pr:7000000,st:"Disponible",fe:["Titre foncier","Eau","Électricité","Proximité aéroport"]},
  {id:"lot4",loc:"Bayakh",zone:"Lac Rose",lots:60,dispo:28,su:300,pr:6000000,st:"Disponible",fe:["Titre foncier","Eau","Vue lac"]},
  {id:"lot5",loc:"Sébikotane",zone:"Zone industrielle",lots:40,dispo:15,su:200,pr:5500000,st:"Limité",fe:["Titre foncier","Eau","Électricité","Voirie"]},
  {id:"lot6",loc:"Keur Massar",zone:"Extension",lots:120,dispo:89,su:150,pr:6500000,st:"Disponible",fe:["Titre foncier","Eau","Électricité","Transport"]},
  {id:"lot7",loc:"Kounoune",zone:"Résidentielle",lots:45,dispo:20,su:200,pr:4500000,st:"Limité",fe:["Titre foncier","Eau","Électricité"]},
  {id:"lot8",loc:"Sindia",zone:"Village",lots:70,dispo:55,su:350,pr:4000000,st:"Disponible",fe:["Délibération","Eau"]}
];

// Fonction pour charger/sauvegarder les données
const loadData=(key,defaultVal)=>{try{const d=localStorage.getItem(`dialibatou_${key}`);return d?JSON.parse(d):defaultVal}catch{return defaultVal}};
const saveData=(key,data)=>{localStorage.setItem(`dialibatou_${key}`,JSON.stringify(data))};

// Hook pour gérer les données dynamiques
const useData=()=>{
  const [properties,setProperties]=useState(()=>loadData('properties',null));
  const [lots,setLots]=useState(()=>loadData('lots',LOTS_INIT));
  const [initialized,setInit]=useState(false);

  useEffect(()=>{
    if(!initialized&&properties===null){setInit(true)}
  },[]);

  const updateProps=(newProps)=>{saveData('properties',newProps);setProperties(newProps)};
  const updateLots=(newLots)=>{saveData('lots',newLots);setLots(newLots)};
  const resetData=()=>{localStorage.removeItem('dialibatou_properties');localStorage.removeItem('dialibatou_lots');setProperties(null);setLots(LOTS_INIT)};

  return {properties,lots,updateProps,updateLots,resetData,hasCustomData:properties!==null};
};

// DATA - Propriétés par défaut
const P=[
  {id:"p1",ti:"Luxueux Appartement Vue Mer Almadies",de:"Superbe appartement de standing avec vue imprenable sur l'océan. Résidence sécurisée, finitions haut de gamme. 3 chambres, terrasse 25m².",ty:"Appartement",tr:"Vente",pr:185000000,nb:"Almadies",su:180,ro:5,be:3,ba:2,fe:["Piscine","Parking","Sécurité 24h","Vue mer"],im:["https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800","https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800"],ft:true,vi:342,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p2",ti:"Appartement Moderne 4P Mermoz",de:"Magnifique appartement contemporain entièrement rénové. Salon double avec balcon, cuisine équipée, chambres climatisées.",ty:"Appartement",tr:"Vente",pr:125000000,nb:"Mermoz",su:140,ro:4,be:3,ba:2,fe:["Parking","Climatisation","Balcon"],im:["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800","https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800"],ft:true,vi:256,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p3",ti:"Studio Meublé Plateau",de:"Studio meublé et équipé au cœur du Plateau. Emplacement premium près ministères et banques.",ty:"Appartement",tr:"Vente",pr:45000000,nb:"Plateau",su:35,ro:1,be:0,ba:1,fe:["Climatisation","Meublé"],im:["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800"],ft:false,vi:189,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p4",ti:"F3 à Louer Ngor",de:"Charmant F3 dans le village de Ngor, près de la plage. Séjour lumineux, cuisine équipée, 2 chambres, terrasse.",ty:"Appartement",tr:"Location",pr:450000,nb:"Ngor",su:85,ro:3,be:2,ba:1,fe:["Terrasse","Climatisation"],im:["https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800"],ft:false,vi:178,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p5",ti:"Penthouse avec Piscine Privée",de:"Penthouse d'exception de 280m² avec piscine privée sur toit-terrasse. 4 chambres en suite. Vue panoramique 360°.",ty:"Appartement",tr:"Vente",pr:450000000,nb:"Almadies",su:280,ro:7,be:4,ba:4,fe:["Piscine","Terrasse","Vue mer","Parking"],im:["https://images.unsplash.com/photo-1600607687644-c7171b42498f?w=800"],ft:true,vi:567,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p6",ti:"Villa Contemporaine Point E",de:"Splendide villa de 6 chambres. Piscine chauffée, jardin paysager, finitions luxe. Bureau, salle de sport.",ty:"Villa",tr:"Vente",pr:380000000,nb:"Point E",su:450,ro:10,be:6,ba:7,fe:["Piscine","Jardin","Parking","Sécurité 24h"],im:["https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800"],ft:true,vi:478,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p7",ti:"Villa Coloniale Rénovée Fann",de:"Charmante villa coloniale entièrement rénovée. Hauts plafonds, parquet, vérandas, jardin tropical.",ty:"Villa",tr:"Vente",pr:295000000,nb:"Fann",su:350,ro:8,be:4,ba:3,fe:["Jardin","Parking","Terrasse"],im:["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800"],ft:false,vi:267,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p8",ti:"Villa Moderne Sacré-Cœur",de:"Belle villa moderne de 5 chambres. Construction récente, panneaux solaires. Double salon, garage 2 voitures.",ty:"Villa",tr:"Vente",pr:220000000,nb:"Sacré-Cœur",su:280,ro:8,be:5,ba:4,fe:["Jardin","Parking","Sécurité 24h"],im:["https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800"],ft:true,vi:356,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p9",ti:"Villa à Louer Ouakam",de:"Grande villa sur 2 niveaux, idéale pour résidentiel ou professionnel. Jardin 400m², parking 5 véhicules.",ty:"Villa",tr:"Location",pr:2500000,nb:"Ouakam",su:380,ro:10,be:6,ba:4,fe:["Jardin","Parking","Sécurité 24h"],im:["https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=800"],ft:false,vi:198,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p10",ti:"Villa Pieds dans l'Eau Ngor",de:"Exceptionnelle villa front de mer. Accès direct plage privée. 5 chambres, piscine à débordement. Propriété rare.",ty:"Villa",tr:"Vente",pr:850000000,nb:"Ngor",su:520,ro:12,be:5,ba:5,fe:["Piscine","Jardin","Vue mer","Terrasse"],im:["https://images.unsplash.com/photo-1613977257592-4871e5fcd7c4?w=800"],ft:true,vi:723,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p11",ti:"Terrain Viabilisé 500m² Saly",de:"Excellent terrain viabilisé à Saly, 500m de la plage. Eau, électricité, assainissement. Idéal villa de vacances.",ty:"Terrain",tr:"Vente",pr:35000000,nb:"Saly",su:500,ro:0,be:0,ba:0,fe:[],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:true,vi:234,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p12",ti:"Grand Terrain 1200m² Mbour",de:"Terrain de 1200m² avec titre foncier, accès bitumé. Parfait pour immeuble locatif ou complexe résidentiel.",ty:"Terrain",tr:"Vente",pr:55000000,nb:"Mbour",su:1200,ro:0,be:0,ba:0,fe:[],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:156,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p13",ti:"Lot Bord de Mer Saly",de:"Rare terrain bord de mer 800m² vue directe océan. Permis de construire obtenu pour villa R+1.",ty:"Terrain",tr:"Vente",pr:150000000,nb:"Saly",su:800,ro:0,be:0,ba:0,fe:["Vue mer"],im:["https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800"],ft:true,vi:298,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p14",ti:"Bureau Premium 300m² Plateau",de:"Espace bureau haut de gamme au cœur du Plateau. Plateau modulable, salles de réunion, climatisation, parking 10 véhicules.",ty:"Bureau",tr:"Location",pr:4500000,nb:"Plateau",su:300,ro:8,be:0,ba:2,fe:["Climatisation","Parking","Sécurité 24h"],im:["https://images.unsplash.com/photo-1497366216548-37526070297c?w=800"],ft:true,vi:234,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p15",ti:"Bureau Moderne 150m² Mermoz",de:"Bureau moderne sur l'axe Mermoz-Sacré Cœur. Open space lumineux, 2 bureaux fermés, salle de réunion.",ty:"Bureau",tr:"Location",pr:1500000,nb:"Mermoz",su:150,ro:5,be:0,ba:1,fe:["Climatisation","Parking"],im:["https://images.unsplash.com/photo-1497366811353-6870744d04b2?w=800"],ft:false,vi:156,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p16",ti:"Boutique Premium Plateau",de:"Local commercial 80m² avec vitrine sur rue passante. Fort trafic piétonnier. Idéal mode, électronique.",ty:"Commerce",tr:"Location",pr:800000,nb:"Plateau",su:80,ro:2,be:0,ba:1,fe:[],im:["https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800"],ft:false,vi:178,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p17",ti:"Restaurant Équipé à Reprendre",de:"Restaurant entièrement équipé 120m². Cuisine professionnelle, salle 40 couverts, terrasse. Clientèle établie.",ty:"Commerce",tr:"Vente",pr:45000000,nb:"Liberté",su:120,ro:3,be:0,ba:2,fe:["Climatisation","Terrasse"],im:["https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800"],ft:true,vi:234,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p18",ti:"Appartement Meublé Standing Mamelles",de:"Magnifique appartement meublé vue sur le phare et l'océan. Décoration design, 3 chambres, cuisine équipée.",ty:"Appartement",tr:"Location",pr:1800000,nb:"Mamelles",su:160,ro:4,be:3,ba:2,fe:["Meublé","Vue mer","Piscine","Terrasse"],im:["https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?w=800"],ft:true,vi:289,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p19",ti:"Villa Familiale Liberté 6",de:"Agréable villa familiale dans quartier calme. 4 chambres, 2 salles de bain, jardin fleuri, parking couvert.",ty:"Villa",tr:"Vente",pr:145000000,nb:"Liberté",su:220,ro:6,be:4,ba:2,fe:["Jardin","Parking","Climatisation"],im:["https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800"],ft:false,vi:167,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p20",ti:"Villa Duplex Moderne Almadies",de:"Superbe villa duplex à 5 min de la plage. Architecture contemporaine, piscine. 4 suites parentales. Domotique.",ty:"Villa",tr:"Location",pr:3500000,nb:"Almadies",su:400,ro:9,be:4,ba:4,fe:["Piscine","Jardin","Parking","Sécurité 24h"],im:["https://images.unsplash.com/photo-1600573472592-401b489a3cdc?w=800"],ft:true,vi:412,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p21",ti:"Terrain Résidentiel Thiès",de:"Beau terrain de 300m² dans un quartier résidentiel calme à Thiès. Titre foncier, accès bitumé. Proche commerces et écoles.",ty:"Terrain",tr:"Vente",pr:12000000,nb:"Thiès",su:300,ro:0,be:0,ba:0,fe:["Titre foncier","Accès bitumé"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:true,vi:189,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p22",ti:"Villa Moderne Thiès",de:"Belle villa R+1 de 4 chambres à Thiès. Construction récente, jardin arboré, garage. Quartier résidentiel sécurisé.",ty:"Villa",tr:"Vente",pr:65000000,nb:"Thiès",su:250,ro:7,be:4,ba:3,fe:["Jardin","Parking","Climatisation","Sécurité 24h"],im:["https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800"],ft:true,vi:234,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p23",ti:"Terrain Viabilisé Bambilor",de:"Terrain de 200m² viabilisé à Bambilor. Eau et électricité disponibles. Zone en plein essor, idéal investissement.",ty:"Terrain",tr:"Vente",pr:5000000,nb:"Bambilor",su:200,ro:0,be:0,ba:0,fe:["Eau","Électricité"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:145,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p24",ti:"Grand Terrain Bambilor",de:"Parcelle de 500m² avec titre foncier à Bambilor. Accès facile depuis la route nationale. Parfait pour projet résidentiel.",ty:"Terrain",tr:"Vente",pr:10000000,nb:"Bambilor",su:500,ro:0,be:0,ba:0,fe:["Titre foncier","Accès bitumé"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:true,vi:198,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p25",ti:"Terrain à Pout",de:"Terrain de 250m² bien situé à Pout. Proche de la route nationale Dakar-Thiès. Zone résidentielle calme.",ty:"Terrain",tr:"Vente",pr:4000000,nb:"Pout",su:250,ro:0,be:0,ba:0,fe:["Accès bitumé"],im:["https://images.unsplash.com/photo-1605146769289-440113cc3d00?w=800"],ft:false,vi:112,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p26",ti:"Terrain Tivaouane Peulh",de:"Parcelle de 300m² à Tivaouane Peulh. Zone calme et résidentielle, accès facile autoroute à péage. Idéal construction villa.",ty:"Terrain",tr:"Vente",pr:6000000,nb:"Tivaouane Peulh",su:300,ro:0,be:0,ba:0,fe:["Accès autoroute"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:134,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p27",ti:"Terrain Ndoukhoura Peulh",de:"Terrain de 200m² à Ndoukhoura Peulh. Quartier en développement, bon potentiel de plus-value. Prix attractif.",ty:"Terrain",tr:"Vente",pr:3500000,nb:"Ndoukhoura Peulh",su:200,ro:0,be:0,ba:0,fe:[],im:["https://images.unsplash.com/photo-1595877244574-e90ce41ce089?w=800"],ft:false,vi:98,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p28",ti:"Terrain Vue Mer Niagues",de:"Magnifique terrain de 400m² à Niagues avec proximité océan. Cadre naturel exceptionnel, idéal villa de vacances.",ty:"Terrain",tr:"Vente",pr:15000000,nb:"Niagues",su:400,ro:0,be:0,ba:0,fe:["Proximité mer"],im:["https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800"],ft:true,vi:178,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p29",ti:"Terrain Résidentiel Niacourap",de:"Parcelle de 250m² à Niacourap. Zone résidentielle proche Rufisque, accès transports en commun. Eau et électricité.",ty:"Terrain",tr:"Vente",pr:5500000,nb:"Niacourap",su:250,ro:0,be:0,ba:0,fe:["Eau","Électricité"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:123,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p30",ti:"Villa Pieds dans l'Eau Niacourap",de:"Villa de charme avec accès direct à la plage. 3 chambres, terrasse avec vue mer, jardin tropical. Idéal résidence secondaire.",ty:"Villa",tr:"Vente",pr:45000000,nb:"Niacourap",su:180,ro:5,be:3,ba:2,fe:["Vue mer","Jardin","Terrasse"],im:["https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800"],ft:true,vi:267,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p31",ti:"Terrain Bord de Mer Yène",de:"Superbe terrain de 500m² en bord de mer à Yène. Vue imprenable sur l'océan. Cadre idyllique pour villa de standing.",ty:"Terrain",tr:"Vente",pr:25000000,nb:"Yène",su:500,ro:0,be:0,ba:0,fe:["Vue mer","Bord de mer"],im:["https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800"],ft:true,vi:245,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p32",ti:"Terrain Toubab Dialao",de:"Terrain de 600m² à Toubab Dialao, village balnéaire prisé. Proximité falaise et plage. Parfait pour projet touristique ou résidentiel.",ty:"Terrain",tr:"Vente",pr:20000000,nb:"Toubab Dialao",su:600,ro:0,be:0,ba:0,fe:["Proximité mer","Vue panoramique"],im:["https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=800"],ft:true,vi:312,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p33",ti:"Villa d'Artiste Toubab Dialao",de:"Charmante villa de style africain contemporain avec vue sur mer. 3 chambres, atelier, terrasse panoramique. Ambiance artistique unique.",ty:"Villa",tr:"Vente",pr:55000000,nb:"Toubab Dialao",su:200,ro:5,be:3,ba:2,fe:["Vue mer","Terrasse","Jardin"],im:["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800"],ft:true,vi:289,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p34",ti:"Terrain Ndayane Futur Pôle",de:"Terrain stratégique de 400m² à Ndayane, zone du futur port en eau profonde. Fort potentiel de plus-value. Titre foncier.",ty:"Terrain",tr:"Vente",pr:18000000,nb:"Ndayane",su:400,ro:0,be:0,ba:0,fe:["Titre foncier","Zone stratégique"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:true,vi:356,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p35",ti:"Appartement F3 Keur Massar",de:"Appartement F3 neuf à Keur Massar. 2 chambres, salon, cuisine équipée. Résidence sécurisée, proche autoroute.",ty:"Appartement",tr:"Vente",pr:18000000,nb:"Keur Massar",su:75,ro:3,be:2,ba:1,fe:["Climatisation","Sécurité 24h"],im:["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800"],ft:false,vi:189,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p36",ti:"Terrain 150m² Keur Massar",de:"Terrain de 150m² à Keur Massar, zone urbanisée. Eau, électricité, tout-à-l'égout. Proche marchés et transports.",ty:"Terrain",tr:"Vente",pr:7000000,nb:"Keur Massar",su:150,ro:0,be:0,ba:0,fe:["Eau","Électricité","Tout-à-l'égout"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:false,vi:167,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p37",ti:"Terrain Diakhaye",de:"Parcelle de 300m² à Diakhaye. Zone résidentielle en développement, calme et accessible. Prix abordable.",ty:"Terrain",tr:"Vente",pr:4500000,nb:"Diakhaye",su:300,ro:0,be:0,ba:0,fe:[],im:["https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800"],ft:false,vi:89,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p38",ti:"Terrain Viabilisé Kounoune",de:"Terrain de 250m² viabilisé à Kounoune. Quartier résidentiel, accès bitumé. Eau et électricité sur place.",ty:"Terrain",tr:"Vente",pr:6500000,nb:"Kounoune",su:250,ro:0,be:0,ba:0,fe:["Eau","Électricité","Accès bitumé"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:false,vi:134,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p39",ti:"Terrain Proche Aéroport Diass",de:"Terrain de 500m² à Diass, à proximité de l'aéroport AIBD. Titre foncier, accès autoroute. Investissement stratégique.",ty:"Terrain",tr:"Vente",pr:15000000,nb:"Diass",su:500,ro:0,be:0,ba:0,fe:["Titre foncier","Accès autoroute","Proximité aéroport"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:true,vi:278,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p40",ti:"Grand Terrain Diass",de:"Parcelle de 1000m² à Diass. Idéal pour projet immobilier d'envergure. Zone en pleine expansion près de l'aéroport.",ty:"Terrain",tr:"Vente",pr:25000000,nb:"Diass",su:1000,ro:0,be:0,ba:0,fe:["Titre foncier"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:false,vi:198,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p41",ti:"Terrain Keur Ndiaye Lo",de:"Terrain de 200m² à Keur Ndiaye Lo. Zone périurbaine en développement, prix accessible. Proche axes routiers.",ty:"Terrain",tr:"Vente",pr:3000000,nb:"Keur Ndiaye Lo",su:200,ro:0,be:0,ba:0,fe:[],im:["https://images.unsplash.com/photo-1558618666-fcd25c85f82e?w=800"],ft:false,vi:87,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p42",ti:"Terrain Résidentiel Sindia",de:"Belle parcelle de 350m² à Sindia. Zone calme entre Dakar et Mbour. Accès goudronné, eau et électricité.",ty:"Terrain",tr:"Vente",pr:7000000,nb:"Sindia",su:350,ro:0,be:0,ba:0,fe:["Eau","Électricité","Accès bitumé"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:false,vi:156,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p43",ti:"Terrain Malikounda",de:"Terrain de 400m² à Malikounda, sur l'axe Mbour-Saly. Zone touristique en expansion. Idéal investissement locatif.",ty:"Terrain",tr:"Vente",pr:10000000,nb:"Malikounda",su:400,ro:0,be:0,ba:0,fe:["Accès bitumé"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:145,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p44",ti:"Villa Neuve Malikounda",de:"Villa neuve de 3 chambres à Malikounda. Construction moderne, jardin clôturé, parking. Proche plages de Saly.",ty:"Villa",tr:"Vente",pr:35000000,nb:"Malikounda",su:180,ro:5,be:3,ba:2,fe:["Jardin","Parking","Climatisation"],im:["https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800"],ft:true,vi:212,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p45",ti:"Terrain Viabilisé Sébikotane",de:"Terrain de 300m² viabilisé à Sébikotane. Zone résidentielle en plein essor, proche université et zone industrielle.",ty:"Terrain",tr:"Vente",pr:6000000,nb:"Sébikotane",su:300,ro:0,be:0,ba:0,fe:["Eau","Électricité","Titre foncier"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:false,vi:167,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p46",ti:"Villa R+1 Sébikotane",de:"Villa R+1 de 4 chambres à Sébikotane. Construction récente, finitions soignées. Jardin 200m², garage double.",ty:"Villa",tr:"Vente",pr:45000000,nb:"Sébikotane",su:220,ro:7,be:4,ba:3,fe:["Jardin","Parking","Climatisation"],im:["https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800"],ft:true,vi:198,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p47",ti:"Terrain Nguérigne",de:"Parcelle de 250m² à Nguérigne. Zone résidentielle proche Saly et Somone. Cadre verdoyant, accès facile.",ty:"Terrain",tr:"Vente",pr:5000000,nb:"Nguérigne",su:250,ro:0,be:0,ba:0,fe:["Accès bitumé"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:112,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p48",ti:"Terrain Gorom",de:"Terrain de 200m² à Gorom. Quartier en développement dans la nouvelle ville de Diamniadio. Investissement d'avenir.",ty:"Terrain",tr:"Vente",pr:4000000,nb:"Gorom",su:200,ro:0,be:0,ba:0,fe:[],im:["https://images.unsplash.com/photo-1523348837708-15d4a09cfac2?w=800"],ft:false,vi:134,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p49",ti:"Terrain Bayakh",de:"Parcelle de 350m² à Bayakh. Zone calme et aérée, proche Lac Rose. Titre foncier disponible.",ty:"Terrain",tr:"Vente",pr:5500000,nb:"Bayakh",su:350,ro:0,be:0,ba:0,fe:["Titre foncier"],im:["https://images.unsplash.com/photo-1628624747186-a941c476b7ef?w=800"],ft:false,vi:98,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p50",ti:"Grand Terrain Bayakh",de:"Grand terrain de 800m² à Bayakh avec titre foncier. Idéal pour ferme, projet agricole ou résidence spacieuse.",ty:"Terrain",tr:"Vente",pr:12000000,nb:"Bayakh",su:800,ro:0,be:0,ba:0,fe:["Titre foncier","Grande surface"],im:["https://images.unsplash.com/photo-1500382017468-9049fed747ef?w=800"],ft:false,vi:123,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p51",ti:"Villa à Louer Thiès",de:"Belle villa meublée 3 chambres à Thiès. Salon spacieux, cuisine équipée, jardin. Quartier résidentiel calme.",ty:"Villa",tr:"Location",pr:350000,nb:"Thiès",su:200,ro:6,be:3,ba:2,fe:["Meublé","Jardin","Climatisation","Parking"],im:["https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=800"],ft:false,vi:145,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p52",ti:"Appartement F4 Keur Massar",de:"Appartement F4 à louer à Keur Massar. 3 chambres, salon, cuisine, balcon. Proche transports et commerces.",ty:"Appartement",tr:"Location",pr:200000,nb:"Keur Massar",su:90,ro:4,be:3,ba:1,fe:["Balcon","Climatisation"],im:["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800"],ft:false,vi:178,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p53",ti:"Maison à Louer Bambilor",de:"Maison individuelle 2 chambres à Bambilor. Cour clôturée, cuisine, salon. Idéal jeune couple.",ty:"Villa",tr:"Location",pr:150000,nb:"Bambilor",su:100,ro:4,be:2,ba:1,fe:["Cour","Clôture"],im:["https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800"],ft:false,vi:112,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p54",ti:"Villa Meublée Sébikotane",de:"Villa meublée R+1 à louer à Sébikotane. 3 chambres, salon, terrasse, parking. Quartier calme et sécurisé.",ty:"Villa",tr:"Location",pr:300000,nb:"Sébikotane",su:180,ro:5,be:3,ba:2,fe:["Meublé","Terrasse","Parking","Climatisation"],im:["https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800"],ft:false,vi:134,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p55",ti:"Maison à Louer Kounoune",de:"Maison 3 chambres à louer à Kounoune. Cour spacieuse, cuisine, salon. Eau et électricité.",ty:"Villa",tr:"Location",pr:120000,nb:"Kounoune",su:120,ro:4,be:3,ba:1,fe:["Cour","Eau","Électricité"],im:["https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=800"],ft:false,vi:98,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p56",ti:"Villa Bord de Mer Toubab Dialao",de:"Villa meublée en bord de mer à louer. 2 chambres, terrasse vue océan, accès plage. Idéal week-end ou vacances.",ty:"Villa",tr:"Location",pr:500000,nb:"Toubab Dialao",su:120,ro:4,be:2,ba:1,fe:["Vue mer","Terrasse","Meublé","Accès plage"],im:["https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800"],ft:true,vi:287,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p57",ti:"Appartement Meublé Diass",de:"Appartement F3 meublé à louer à Diass. Proche aéroport AIBD. 2 chambres, salon, cuisine équipée.",ty:"Appartement",tr:"Location",pr:250000,nb:"Diass",su:70,ro:3,be:2,ba:1,fe:["Meublé","Climatisation","Proximité aéroport"],im:["https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800"],ft:false,vi:167,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p58",ti:"Villa à Louer Sindia",de:"Grande villa 4 chambres à louer à Sindia. Jardin arboré, parking, cuisine équipée. Zone calme.",ty:"Villa",tr:"Location",pr:250000,nb:"Sindia",su:220,ro:6,be:4,ba:2,fe:["Jardin","Parking","Climatisation"],im:["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800"],ft:false,vi:123,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}},
  {id:"p59",ti:"Studio Meublé Malikounda",de:"Studio meublé à louer à Malikounda. Proche plages de Saly. Climatisé, cuisine équipée. Idéal saisonnier.",ty:"Appartement",tr:"Location",pr:180000,nb:"Malikounda",su:35,ro:1,be:1,ba:1,fe:["Meublé","Climatisation"],im:["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800"],ft:false,vi:145,ag:{na:"Fatou Sow",ph:"+221 76 949 64 66"}},
  {id:"p60",ti:"Maison à Louer Niacourap",de:"Maison 3 chambres à Niacourap avec grande cour. Proche plage, quartier calme et résidentiel.",ty:"Villa",tr:"Location",pr:180000,nb:"Niacourap",su:140,ro:5,be:3,ba:1,fe:["Cour","Proximité mer"],im:["https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800"],ft:false,vi:89,ag:{na:"Amadou Diallo",ph:"+221 77 709 61 44"}}
];

// COORDINATES pour la carte
const COORDS={"Almadies":[14.745,-17.522],"Mermoz":[14.707,-17.473],"Plateau":[14.669,-17.438],"Ouakam":[14.724,-17.491],"Ngor":[14.748,-17.518],"Point E":[14.697,-17.465],"Fann":[14.694,-17.457],"Sacré-Cœur":[14.715,-17.458],"Liberté":[14.705,-17.450],"Mamelles":[14.732,-17.505],"Yoff":[14.755,-17.478],"Keur Massar":[14.768,-17.317],"Gorom":[14.746,-17.332],"Bambilor":[14.732,-17.215],"Tivaouane Peulh":[14.770,-17.295],"Ndoukhoura Peulh":[14.760,-17.280],"Niagues":[14.710,-17.230],"Niacourap":[14.680,-17.240],"Sébikotane":[14.740,-17.140],"Diakhaye":[14.735,-17.310],"Kounoune":[14.760,-17.260],"Keur Ndiaye Lo":[14.750,-17.270],"Bayakh":[14.785,-17.240],"Thiès":[14.789,-16.926],"Pout":[14.767,-17.059],"Sindia":[14.581,-17.053],"Diass":[14.670,-17.070],"Malikounda":[14.470,-17.010],"Nguérigne":[14.450,-16.980],"Saly":[14.448,-17.015],"Mbour":[14.419,-16.964],"Toubab Dialao":[14.630,-17.170],"Ndayane":[14.640,-17.130],"Yène":[14.660,-17.170]};

// TESTIMONIALS
const TE=[
  {na:"Mamadou Ndiaye",ro:"Directeur Général",co:"DIALIBATOU nous a accompagnés dans l'acquisition de notre siège social. Expertise remarquable.",im:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200"},
  {na:"Aïssatou Diallo",ro:"Médecin",co:"Grâce à DIALIBATOU, j'ai trouvé la maison de mes rêves aux Almadies. Équipe à l'écoute.",im:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200"},
  {na:"Pierre Dubois",ro:"Expatrié",co:"Service impeccable pour notre recherche de villa. L'agence a parfaitement compris nos critères.",im:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=200"},
  {na:"Ousmane Sarr",ro:"Entrepreneur",co:"Construction de mon usine livrée avec qualité, délais respectés et budget maîtrisé. Je recommande.",im:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200"}
];

// UTILS
const REGIONS=["Dakar","Rufisque","Thiès","Petite Côte"];
const fP=(p,t)=>p>=1e6?`${(p/1e6).toFixed(0)} M FCFA${t==="Location"?"/mois":""}`:`${p.toLocaleString('fr-FR')} FCFA${t==="Location"?"/mois":""}`;
const RG={"Almadies":"Dakar","Mermoz":"Dakar","Plateau":"Dakar","Ouakam":"Dakar","Ngor":"Dakar","Point E":"Dakar","Fann":"Dakar","Sacré-Cœur":"Dakar","Liberté":"Dakar","Mamelles":"Dakar","Yoff":"Dakar","Keur Massar":"Dakar","Gorom":"Dakar","Bambilor":"Rufisque","Tivaouane Peulh":"Rufisque","Ndoukhoura Peulh":"Rufisque","Niagues":"Rufisque","Niacourap":"Rufisque","Sébikotane":"Rufisque","Diakhaye":"Rufisque","Kounoune":"Rufisque","Keur Ndiaye Lo":"Rufisque","Bayakh":"Rufisque","Thiès":"Thiès","Pout":"Thiès","Sindia":"Thiès","Diass":"Thiès","Malikounda":"Petite Côte","Nguérigne":"Petite Côte","Saly":"Petite Côte","Mbour":"Petite Côte","Toubab Dialao":"Petite Côte","Ndayane":"Petite Côte","Yène":"Petite Côte"};
const gR=(nb)=>RG[nb]||"Sénégal";
const PER_PAGE=12;
const useFavs=()=>{
  const [favs,setFavs]=useState(()=>{try{return JSON.parse(localStorage.getItem('dialibatou_favs'))||[]}catch{return[]}});
  const toggle=(id)=>{const n=favs.includes(id)?favs.filter(f=>f!==id):[...favs,id];setFavs(n);localStorage.setItem('dialibatou_favs',JSON.stringify(n))};
  return{favs,toggle,isFav:(id)=>favs.includes(id)};
};

// ICONS SVG
const I={
  home:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>,
  building:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>,
  map:<><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></>,
  phone:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>,
  mail:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>,
  search:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>,
  heart:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>,
  chevR:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7"/>,
  chevL:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7"/>,
  menu:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16"/>,
  x:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12"/>,
  star:<path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>,
  users:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>,
  award:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>,
  clock:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>,
  check:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7"/>,
  arrR:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 5l7 7m0 0l-7 7m7-7H3"/>,
  arrU:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 10l7-7m0 0l7 7m-7-7v18"/>,
  bed:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>,
  square:<rect x="3" y="3" width="18" height="18" rx="2" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/>,
  eye:<><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></>,
  msg:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>,
  cal:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>,
  hammer:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>,
  shield:<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
};
const Ic=({n,c="w-5 h-5"})=><svg className={c} fill="none" stroke="currentColor" viewBox="0 0 24 24">{I[n]}</svg>;

// COMPONENTS
const Logo=({l,sz="md"})=>{
  const sizes={sm:"h-10",md:"h-12",lg:"h-16"};
  return(
    <div className="flex items-center gap-3">
      <div className={`${sizes[sz]} aspect-square relative`}>
        <svg viewBox="0 0 100 100" className="w-full h-full">
          <defs>
            <linearGradient id="gold" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#F5D060"/><stop offset="50%" stopColor="#D4AF37"/><stop offset="100%" stopColor="#B8973A"/></linearGradient>
            <linearGradient id="silver" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#E8E8E8"/><stop offset="50%" stopColor="#B0B0B0"/><stop offset="100%" stopColor="#808080"/></linearGradient>
            <linearGradient id="blue" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#4A90D9"/><stop offset="100%" stopColor="#2C5F8A"/></linearGradient>
          </defs>
          <rect x="20" y="25" width="12" height="45" rx="1" fill="url(#blue)"/>
          <rect x="35" y="15" width="14" height="55" rx="1" fill="url(#silver)"/>
          <rect x="37" y="20" width="3" height="4" rx="0.5" fill="#fff" opacity="0.6"/>
          <rect x="42" y="20" width="3" height="4" rx="0.5" fill="#fff" opacity="0.6"/>
          <rect x="37" y="28" width="3" height="4" rx="0.5" fill="#fff" opacity="0.6"/>
          <rect x="42" y="28" width="3" height="4" rx="0.5" fill="#fff" opacity="0.6"/>
          <rect x="37" y="36" width="3" height="4" rx="0.5" fill="#fff" opacity="0.6"/>
          <rect x="42" y="36" width="3" height="4" rx="0.5" fill="#fff" opacity="0.6"/>
          <polygon points="55,35 75,35 85,55 55,55" fill="url(#silver)"/>
          <polygon points="55,35 70,22 85,35" fill="url(#gold)"/>
          <rect x="63" y="42" width="6" height="8" rx="0.5" fill="#555"/>
          <rect x="73" y="40" width="5" height="6" rx="0.5" fill="#fff" opacity="0.5"/>
          <ellipse cx="55" cy="72" rx="35" ry="8" fill="none" stroke="url(#gold)" strokeWidth="2.5"/>
        </svg>
      </div>
      <div className="flex flex-col">
        <span className={`font-bold ${sz==='lg'?'text-2xl':'text-xl'} ${l?'text-white':'text-gray-900'}`}>DIALI<span className="text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-amber-600">BATOU</span></span>
        <span className={`text-xs font-medium tracking-widest ${l?'text-gray-300':'text-gray-500'}`}>— BTP IMMOBILIER —</span>
      </div>
    </div>
  );
};

const Btn=({ch,v="primary",sz="md",cl="",onClick})=>{
  const vs={primary:"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white shadow-lg",outline:"border-2 border-amber-500 text-amber-600 hover:bg-amber-500 hover:text-white",white:"bg-white text-gray-900 hover:bg-gray-100 shadow-lg",ghost:"text-gray-700 hover:bg-gray-100"};
  const szs={sm:"px-3 py-1.5 text-sm",md:"px-5 py-2.5",lg:"px-8 py-3.5 text-lg"};
  return <button onClick={onClick} className={`inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all ${vs[v]} ${szs[sz]} ${cl}`}>{ch}</button>;
};

const Badge=({ch,v="default"})=>{
  const vs={default:"bg-gray-100 text-gray-800",primary:"bg-amber-100 text-amber-800",sale:"bg-gradient-to-r from-amber-500 to-amber-600 text-white",rent:"bg-gradient-to-r from-blue-500 to-blue-600 text-white"};
  return <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ${vs[v]}`}>{ch}</span>;
};

const Card=({p,onV,isFav,toggleFav})=>{
  const [i,sI]=useState(0);
  return(
    <div className="bg-white rounded-2xl shadow-lg overflow-hidden group hover:shadow-2xl transition-all">
      <div className="relative aspect-[4/3] overflow-hidden">
        <img src={p.im[i]} alt={p.ti} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"/>
        {p.im.length>1&&<>
          <button onClick={e=>{e.stopPropagation();sI(x=>x>0?x-1:p.im.length-1)}} className="absolute left-2 top-1/2 -translate-y-1/2 p-1.5 bg-white/80 rounded-full opacity-0 group-hover:opacity-100"><Ic n="chevL" c="w-4 h-4"/></button>
          <button onClick={e=>{e.stopPropagation();sI(x=>x<p.im.length-1?x+1:0)}} className="absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-white/80 rounded-full opacity-0 group-hover:opacity-100"><Ic n="chevR" c="w-4 h-4"/></button>
        </>}
        <div className="absolute top-3 left-3 flex flex-col gap-2">
          <Badge ch={p.tr==="Vente"?"À VENDRE":"À LOUER"} v={p.tr==="Vente"?"sale":"rent"}/>
          {p.ft&&<Badge ch={<><Ic n="star" c="w-3 h-3 mr-1"/>Premium</>} v="primary"/>}
        </div>
        <button onClick={e=>{e.stopPropagation();toggleFav&&toggleFav(p.id)}} className={`absolute top-3 right-3 p-2 rounded-full ${isFav?'bg-red-500 text-white':'bg-white/80 text-gray-600 hover:bg-white hover:text-red-500'}`}><Ic n="heart" c="w-5 h-5"/></button>
      </div>
      <div className="p-5">
        <p className="text-2xl font-bold text-amber-600 mb-2">{fP(p.pr,p.tr)}</p>
        <h3 className="text-lg font-semibold text-gray-900 mb-2 line-clamp-1 group-hover:text-amber-600">{p.ti}</h3>
        <p className="flex items-center text-gray-500 text-sm mb-4"><Ic n="map" c="w-4 h-4 mr-1"/><span className="line-clamp-1">{p.nb}, {gR(p.nb)}</span></p>
        {p.ty!=="Terrain"&&<div className="flex items-center gap-4 text-gray-600 text-sm mb-4">
          <span className="flex items-center gap-1"><Ic n="square" c="w-4 h-4"/>{p.su} m²</span>
          {p.be>0&&<span className="flex items-center gap-1"><Ic n="bed" c="w-4 h-4"/>{p.be}</span>}
        </div>}
        <div className="flex items-center justify-between pt-4 border-t border-gray-100">
          <Badge ch={p.ty}/>
          <span className="flex items-center text-gray-400 text-sm"><Ic n="eye" c="w-4 h-4 mr-1"/>{p.vi}</span>
        </div>
        <Btn ch={<>Voir détails<Ic n="arrR" c="w-4 h-4"/></>} v="outline" cl="w-full mt-4" onClick={()=>onV(p)}/>
      </div>
    </div>
  );
};

const Header=({pg,sP})=>{
  const [mo,sMo]=useState(false);
  const [sc,sSc]=useState(false);
  useEffect(()=>{const h=()=>sSc(window.scrollY>50);window.addEventListener('scroll',h);return()=>window.removeEventListener('scroll',h)},[]);
  const nav=[{id:'home',l:'Accueil'},{id:'properties',l:'Biens'},{id:'cooperative',l:'Coopérative'},{id:'services',l:'Services'},{id:'contact',l:'Contact'}];
  return(
    <header className={`fixed top-0 left-0 right-0 z-40 transition-all ${sc?'bg-white shadow-lg':'bg-white/95 backdrop-blur-md'}`}>
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-20">
          <button onClick={()=>sP('home')}><Logo/></button>
          <nav className="hidden md:flex items-center gap-1">
            {nav.map(n=><button key={n.id} onClick={()=>sP(n.id)} className={`px-4 py-2 rounded-lg font-medium transition-all ${pg===n.id?'text-amber-600 bg-amber-50':'text-gray-700 hover:text-amber-600 hover:bg-gray-50'}`}>{n.l}</button>)}
          </nav>
          <div className="hidden md:flex items-center gap-4">
            <a href={`https://wa.me/${CO.wa}`} target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 text-green-600 hover:text-green-700 font-medium"><Ic n="msg" c="w-5 h-5"/>WhatsApp</a>
          </div>
          <button onClick={()=>sMo(!mo)} className="md:hidden p-2 rounded-lg hover:bg-gray-100"><Ic n={mo?"x":"menu"} c="w-6 h-6"/></button>
        </div>
      </div>
      {mo&&<div className="md:hidden bg-white border-t shadow-lg"><div className="px-4 py-6 space-y-2">
        {nav.map(n=><button key={n.id} onClick={()=>{sP(n.id);sMo(false)}} className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium ${pg===n.id?'text-amber-600 bg-amber-50':'text-gray-700 hover:bg-gray-50'}`}>{n.l}</button>)}
      </div></div>}
    </header>
  );
};

const Footer=({sP})=>(
  <footer className="bg-gray-900 text-white">
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12">
        <div className="space-y-6"><Logo l/><p className="text-gray-400">Votre partenaire immobilier de confiance au Sénégal.</p></div>
        <div><h4 className="text-lg font-bold mb-6">Navigation</h4><ul className="space-y-3">{['Accueil','Biens','Coopérative','Services','Contact'].map((i,x)=><li key={x}><button onClick={()=>sP(['home','properties','cooperative','services','contact'][x])} className="text-gray-400 hover:text-amber-500 flex items-center gap-2"><Ic n="chevR" c="w-4 h-4"/>{i}</button></li>)}</ul></div>
        <div><h4 className="text-lg font-bold mb-6">Services</h4><ul className="space-y-3">{['Achat & Vente','Location','Gestion','Construction'].map((i,x)=><li key={x} className="text-gray-400 flex items-start gap-2"><Ic n="check" c="w-4 h-4 mt-1 text-amber-500"/>{i}</li>)}</ul></div>
        <div><h4 className="text-lg font-bold mb-6">Contact</h4><ul className="space-y-4">
          <li className="flex items-start gap-3"><Ic n="map" c="w-5 h-5 text-amber-500 mt-1"/><span className="text-gray-400">{CO.addr}</span></li>
          {CO.ph.map((p,i)=><li key={i} className="flex items-center gap-3"><Ic n="phone" c="w-5 h-5 text-amber-500"/><a href={`tel:${p}`} className="text-gray-400 hover:text-amber-500">{p}</a></li>)}
          <li className="flex items-center gap-3"><Ic n="mail" c="w-5 h-5 text-amber-500"/><a href={`mailto:${CO.email}`} className="text-gray-400 hover:text-amber-500">{CO.email}</a></li>
        </ul></div>
      </div>
    </div>
    {/* Réseaux sociaux et Admin */}
    <div className="border-t border-gray-800">
      <div className="max-w-7xl mx-auto px-4 py-8">
        <div className="flex flex-col md:flex-row items-center justify-between gap-6">
          {/* Réseaux sociaux */}
          <div className="flex items-center gap-4">
            <span className="text-gray-400 text-sm">Suivez-nous :</span>
            <a href="https://www.facebook.com/share/17u3mznRuX/" target="_blank" rel="noopener noreferrer" className="w-10 h-10 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center transition-colors" title="Facebook">
              <svg className="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            </a>
            <a href="https://www.instagram.com/dialibatou_btp_immobilier?igsh=MzUxcjN0MjcyNWZ0&utm_source=qr" target="_blank" rel="noopener noreferrer" className="w-10 h-10 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400 hover:from-purple-700 hover:via-pink-600 hover:to-orange-500 rounded-full flex items-center justify-center transition-all" title="Instagram">
              <svg className="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
            </a>
            <a href={`https://wa.me/${CO.wa}`} target="_blank" rel="noopener noreferrer" className="w-10 h-10 bg-green-500 hover:bg-green-600 rounded-full flex items-center justify-center transition-colors" title="WhatsApp">
              <svg className="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
            </a>
          </div>
          {/* Bouton Admin */}
          <button onClick={()=>sP('admin')} className="px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-lg">
            <Ic n="shield" c="w-5 h-5"/>
            <span>Espace Administration</span>
          </button>
        </div>
      </div>
    </div>
    {/* Copyright */}
    <div className="border-t border-gray-800"><div className="max-w-7xl mx-auto px-4 py-4 text-center text-gray-500 text-sm">© {new Date().getFullYear()} {CO.name}. Tous droits réservés.</div></div>
  </footer>
);

// PAGES
const Home=({sP,sS,favs})=>{
  const ft=P.filter(p=>p.ft).slice(0,6);
  return(<div>
    {/* HERO */}
    <section className="relative min-h-screen flex items-center justify-center overflow-hidden">
      <div className="absolute inset-0"><img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=1920" alt="Dakar" className="w-full h-full object-cover"/><div className="absolute inset-0 bg-gradient-to-r from-black/80 via-black/60 to-transparent"/></div>
      <div className="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-32">
        <div className="max-w-3xl">
          <div className="inline-flex items-center gap-2 bg-amber-500/20 backdrop-blur-sm border border-amber-500/30 rounded-full px-4 py-2 mb-6"><span className="w-2 h-2 bg-amber-500 rounded-full animate-pulse"/><span className="text-amber-400 text-sm font-medium">Leader immobilier au Sénégal</span></div>
          <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight">Construisons ensemble <span className="text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-amber-600">votre avenir immobilier</span></h1>
          <p className="text-xl text-gray-300 mb-10">Achat, vente, location, construction : votre partenaire de confiance à Dakar et au Sénégal.</p>
          <div className="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20">
            <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
              <select className="w-full px-4 py-3 bg-white/90 rounded-lg text-gray-800"><option value="">Transaction</option><option>Achat</option><option>Location</option></select>
              <select className="w-full px-4 py-3 bg-white/90 rounded-lg text-gray-800"><option value="">Type de bien</option>{TY.map(t=><option key={t}>{t}</option>)}</select>
              <select className="w-full px-4 py-3 bg-white/90 rounded-lg text-gray-800"><option value="">Quartier</option>{NB.map(n=><option key={n}>{n}</option>)}</select>
            </div>
            <Btn ch={<><Ic n="search" c="w-5 h-5"/>Rechercher</>} sz="lg" onClick={()=>sP('properties')}/>
          </div>
        </div>
      </div>
      <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent py-8">
        <div className="max-w-7xl mx-auto px-4"><div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
          {[{v:CO.stats.proj,l:'Projets réalisés',s:'+'},{v:CO.stats.cli,l:'Clients satisfaits',s:'+'},{v:CO.stats.yrs,l:"Années d'expérience",s:''},{v:CO.stats.prop,l:'Biens disponibles',s:'+'}].map((s,i)=><div key={i}><p className="text-3xl md:text-4xl font-bold text-amber-500">{s.v}{s.s}</p><p className="text-gray-300 text-sm mt-1">{s.l}</p></div>)}
        </div></div>
      </div>
    </section>
    {/* FEATURED */}
    <section className="py-20 bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-12">
          <div><span className="text-amber-600 font-semibold uppercase tracking-wider">Notre sélection</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Biens en vedette</h2></div>
          <Btn ch={<>Voir tout<Ic n="arrR" c="w-4 h-4"/></>} v="outline" onClick={()=>sP('properties')}/>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">{ft.map(p=><Card key={p.id} p={p} onV={x=>{sS(x);sP('detail')}} isFav={favs.isFav(p.id)} toggleFav={favs.toggle}/>)}</div>
      </div>
    </section>
    {/* SERVICES */}
    <section className="py-20 bg-white">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Nos services</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2 mb-4">Solutions immobilières complètes</h2></div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {[{i:'home',t:'Achat & Vente',d:'Accompagnement personnalisé pour toutes vos transactions'},{i:'building',t:'Location',d:'Trouvez ou mettez en location votre bien idéal'},{i:'hammer',t:'Construction',d:'Projets clé en main avec les meilleurs standards'},{i:'shield',t:'Gestion',d:'Confiez-nous la gestion de votre patrimoine'}].map((s,x)=>(
            <div key={x} className="bg-white rounded-2xl shadow-lg p-6 text-center group cursor-pointer hover:shadow-2xl transition-all">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-amber-100 text-amber-600 mb-6 group-hover:scale-110 transition-transform"><Ic n={s.i} c="w-8 h-8"/></div>
              <h3 className="text-xl font-bold text-gray-900 mb-3">{s.t}</h3><p className="text-gray-600">{s.d}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
    {/* WHY US */}
    <section className="py-20 bg-gray-900 text-white">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
          <div>
            <span className="text-amber-500 font-semibold uppercase tracking-wider">Pourquoi nous choisir</span>
            <h2 className="text-3xl md:text-4xl font-bold mt-2 mb-6">L'excellence immobilière</h2>
            <p className="text-gray-300 mb-8">Depuis plus de {CO.stats.yrs} ans, nous offrons des services de qualité supérieure à Dakar et au Sénégal.</p>
            <div className="space-y-6">
              {[{i:'award',t:'Expertise reconnue',d:'Connaissance approfondie du marché sénégalais'},{i:'users',t:'Accompagnement personnalisé',d:'Suivi sur mesure adapté à vos besoins'},{i:'shield',t:'Transparence totale',d:'Transactions sécurisées et communication claire'}].map((x,i)=>(
                <div key={i} className="flex gap-4"><div className="flex-shrink-0 w-12 h-12 rounded-lg bg-amber-500/20 flex items-center justify-center"><Ic n={x.i} c="w-6 h-6 text-amber-500"/></div><div><h3 className="font-bold text-lg">{x.t}</h3><p className="text-gray-400">{x.d}</p></div></div>
              ))}
            </div>
            <Btn ch={<>Contactez-nous<Ic n="arrR" c="w-5 h-5"/></>} v="white" sz="lg" cl="mt-10" onClick={()=>sP('contact')}/>
          </div>
          <div className="relative"><img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800" alt="" className="rounded-2xl shadow-2xl"/><div className="absolute -bottom-8 -left-8 bg-amber-500 text-white p-6 rounded-2xl shadow-xl"><p className="text-4xl font-bold">{CO.stats.yrs}+</p><p className="text-sm opacity-90">Années d'expérience</p></div></div>
        </div>
      </div>
    </section>
    {/* TESTIMONIALS */}
    <section className="py-20 bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Témoignages</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Ce que disent nos clients</h2></div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {TE.map((t,i)=><div key={i} className="bg-white rounded-2xl shadow-lg p-6">
            <div className="flex items-center gap-1 mb-4">{[1,2,3,4,5].map(x=><Ic key={x} n="star" c="w-5 h-5 text-amber-500"/>)}</div>
            <p className="text-gray-600 mb-6 italic">"{t.co}"</p>
            <div className="flex items-center gap-3"><img src={t.im} alt={t.na} className="w-12 h-12 rounded-full object-cover"/><div><p className="font-bold text-gray-900">{t.na}</p><p className="text-sm text-gray-500">{t.ro}</p></div></div>
          </div>)}
        </div>
      </div>
    </section>
    {/* LOCALITIES */}
    <section className="py-20 bg-white">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Nos zones</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Trouvez par localité</h2></div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {REGIONS.map(rg=><div key={rg} className="bg-gray-50 rounded-2xl p-6">
            <h3 className="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2"><Ic n="map" c="w-5 h-5 text-amber-500"/>{rg}</h3>
            <div className="space-y-2">{NB.filter(n=>gR(n)===rg).map(n=><button key={n} onClick={()=>sP('properties')} className="block text-sm text-gray-600 hover:text-amber-600 hover:translate-x-1 transition-all">{n} <span className="text-gray-400">({P.filter(p=>p.nb===n).length})</span></button>)}</div>
          </div>)}
        </div>
      </div>
    </section>
    {/* CTA */}
    <section className="py-20 bg-gradient-to-r from-amber-500 to-amber-600">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 className="text-3xl md:text-4xl font-bold text-white mb-6">Prêt à concrétiser votre projet ?</h2>
        <p className="text-xl text-amber-100 mb-10">Contactez-nous pour une consultation gratuite</p>
        <div className="flex flex-col sm:flex-row gap-4 justify-center">
          <Btn ch={<><Ic n="cal" c="w-5 h-5"/>Rendez-vous</>} v="white" sz="lg" onClick={()=>sP('contact')}/>
          <a href={`https://wa.me/${CO.wa}`} target="_blank" rel="noopener noreferrer"><Btn ch={<><Ic n="msg" c="w-5 h-5"/>WhatsApp</>} v="outline" sz="lg" cl="border-white text-white hover:bg-white hover:text-amber-600 w-full"/></a>
        </div>
      </div>
    </section>
  </div>);
};

const MapView=({properties,onV})=>{
  const mapRef=useRef(null);
  const mapInst=useRef(null);
  useEffect(()=>{
    if(!mapRef.current||mapInst.current)return;
    const map=L.map(mapRef.current).setView([14.7,-17.1],10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'OpenStreetMap'}).addTo(map);
    mapInst.current=map;
    return()=>{if(mapInst.current){mapInst.current.remove();mapInst.current=null}};
  },[]);
  useEffect(()=>{
    if(!mapInst.current)return;
    mapInst.current.eachLayer(l=>{if(l instanceof L.Marker)mapInst.current.removeLayer(l)});
    properties.forEach(p=>{
      const c=COORDS[p.nb];if(!c)return;
      const marker=L.marker(c).addTo(mapInst.current);
      marker.bindPopup(`<div style="min-width:200px"><b>${p.ti}</b><br/><span style="color:#d97706;font-weight:bold">${fP(p.pr,p.tr)}</span><br/><small>${p.nb}, ${gR(p.nb)}</small></div>`);
      marker.on('click',()=>onV(p));
    });
    if(properties.length>0){const bounds=properties.filter(p=>COORDS[p.nb]).map(p=>COORDS[p.nb]);if(bounds.length>0)mapInst.current.fitBounds(bounds,{padding:[30,30]})}
  },[properties]);
  return <div ref={mapRef} style={{height:'500px',width:'100%'}}/>;
};

const Props=({sP,sS,favs})=>{
  const [f,sF]=useState({ty:'',tr:'',nb:'',rg:'',pm:'',q:'',fav:false});
  const [so,sSo]=useState('');
  const [pg,sPg]=useState(1);
  const [view,sView]=useState('grid');
  const fl=useMemo(()=>{
    let r=[...P];
    if(f.q){const q=f.q.toLowerCase();r=r.filter(p=>p.ti.toLowerCase().includes(q)||p.de.toLowerCase().includes(q)||p.nb.toLowerCase().includes(q))}
    if(f.ty)r=r.filter(p=>p.ty===f.ty);
    if(f.tr)r=r.filter(p=>p.tr===f.tr);
    if(f.rg)r=r.filter(p=>gR(p.nb)===f.rg);
    if(f.nb)r=r.filter(p=>p.nb===f.nb);
    if(f.pm)r=r.filter(p=>p.pr<=parseInt(f.pm));
    if(f.fav)r=r.filter(p=>favs.favs.includes(p.id));
    if(so==='pa')r.sort((a,b)=>a.pr-b.pr);
    if(so==='pd')r.sort((a,b)=>b.pr-a.pr);
    if(so==='vi')r.sort((a,b)=>b.vi-a.vi);
    return r;
  },[f,so,favs.favs]);
  const totalPages=Math.ceil(fl.length/PER_PAGE);
  const paged=fl.slice((pg-1)*PER_PAGE,pg*PER_PAGE);
  useEffect(()=>{sPg(1)},[f,so]);
  const filteredNB=f.rg?NB.filter(n=>gR(n)===f.rg):NB;
  return(<div className="min-h-screen bg-gray-50 pt-24">
    <div className="bg-gradient-to-r from-gray-900 to-gray-800 py-16"><div className="max-w-7xl mx-auto px-4"><h1 className="text-4xl font-bold text-white mb-4">Nos biens immobiliers</h1><p className="text-gray-300">{P.length} biens disponibles à Dakar et au Sénégal</p></div></div>
    <div className="max-w-7xl mx-auto px-4 py-8">
      <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
        <div className="relative mb-4">
          <Ic n="search" c="w-5 h-5 absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"/>
          <input type="text" value={f.q} onChange={e=>sF({...f,q:e.target.value})} placeholder="Rechercher par nom, description, localité..." className="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"/>
        </div>
        <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-7 gap-3">
          <select value={f.ty} onChange={e=>sF({...f,ty:e.target.value})} className="px-3 py-2.5 border border-gray-300 rounded-lg text-sm"><option value="">Tous types</option>{TY.map(t=><option key={t} value={t}>{t}</option>)}</select>
          <select value={f.tr} onChange={e=>sF({...f,tr:e.target.value})} className="px-3 py-2.5 border border-gray-300 rounded-lg text-sm"><option value="">Toutes transactions</option><option value="Vente">Vente</option><option value="Location">Location</option></select>
          <select value={f.rg} onChange={e=>sF({...f,rg:e.target.value,nb:''})} className="px-3 py-2.5 border border-gray-300 rounded-lg text-sm"><option value="">Toutes régions</option>{REGIONS.map(r=><option key={r} value={r}>{r}</option>)}</select>
          <select value={f.nb} onChange={e=>sF({...f,nb:e.target.value})} className="px-3 py-2.5 border border-gray-300 rounded-lg text-sm"><option value="">Tous quartiers</option>{filteredNB.map(n=><option key={n} value={n}>{n}</option>)}</select>
          <select value={f.pm} onChange={e=>sF({...f,pm:e.target.value})} className="px-3 py-2.5 border border-gray-300 rounded-lg text-sm"><option value="">Budget max</option><option value="10000000">10 M</option><option value="25000000">25 M</option><option value="50000000">50 M</option><option value="100000000">100 M</option><option value="200000000">200 M</option><option value="500000000">500 M</option></select>
          <select value={so} onChange={e=>sSo(e.target.value)} className="px-3 py-2.5 border border-gray-300 rounded-lg text-sm"><option value="">Trier par</option><option value="pa">Prix ↑</option><option value="pd">Prix ↓</option><option value="vi">Plus vus</option></select>
          <button onClick={()=>sF({...f,fav:!f.fav})} className={`px-3 py-2.5 border rounded-lg text-sm font-medium flex items-center justify-center gap-1 ${f.fav?'bg-red-50 border-red-300 text-red-600':'border-gray-300 text-gray-600 hover:bg-gray-50'}`}><Ic n="heart" c="w-4 h-4"/>{f.fav?'Favoris':'Favoris'}</button>
        </div>
      </div>
      <div className="flex items-center justify-between mb-6">
        <p className="text-gray-600">{fl.length} bien{fl.length>1?'s':''} trouvé{fl.length>1?'s':''}</p>
        <div className="flex items-center gap-2">
          <button onClick={()=>sView('grid')} className={`p-2 rounded-lg ${view==='grid'?'bg-amber-100 text-amber-600':'text-gray-400 hover:bg-gray-100'}`}><svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg></button>
          <button onClick={()=>sView('map')} className={`p-2 rounded-lg ${view==='map'?'bg-amber-100 text-amber-600':'text-gray-400 hover:bg-gray-100'}`}><Ic n="map" c="w-5 h-5"/></button>
          <Btn ch="Réinitialiser" v="ghost" sz="sm" onClick={()=>sF({ty:'',tr:'',nb:'',rg:'',pm:'',q:'',fav:false})}/>
        </div>
      </div>
      {fl.length===0?<div className="text-center py-16"><Ic n="building" c="w-16 h-16 text-gray-300 mx-auto mb-4"/><h3 className="text-xl font-semibold text-gray-900 mb-2">Aucun bien trouvé</h3><Btn ch="Réinitialiser" onClick={()=>sF({ty:'',tr:'',nb:'',rg:'',pm:'',q:'',fav:false})}/></div>
      :view==='map'?<MapView properties={fl} onV={x=>{sS(x);sP('detail')}}/>
      :<>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">{paged.map(p=><Card key={p.id} p={p} onV={x=>{sS(x);sP('detail')}} isFav={favs.isFav(p.id)} toggleFav={favs.toggle}/>)}</div>
        {totalPages>1&&<div className="flex items-center justify-center gap-2 mt-10">
          <button onClick={()=>sPg(x=>Math.max(1,x-1))} disabled={pg===1} className="px-4 py-2 border rounded-lg disabled:opacity-30 hover:bg-gray-100"><Ic n="chevL" c="w-5 h-5"/></button>
          {Array.from({length:totalPages},(_,i)=>i+1).filter(i=>i===1||i===totalPages||Math.abs(i-pg)<=2).map((i,idx,arr)=><React.Fragment key={i}>{idx>0&&arr[idx-1]!==i-1&&<span className="px-2 text-gray-400">...</span>}<button onClick={()=>sPg(i)} className={`w-10 h-10 rounded-lg font-medium ${i===pg?'bg-amber-500 text-white':'hover:bg-gray-100 text-gray-700'}`}>{i}</button></React.Fragment>)}
          <button onClick={()=>sPg(x=>Math.min(totalPages,x+1))} disabled={pg===totalPages} className="px-4 py-2 border rounded-lg disabled:opacity-30 hover:bg-gray-100"><Ic n="chevR" c="w-5 h-5"/></button>
        </div>}
      </>}
    </div>
  </div>);
};

const Detail=({p,sP})=>{
  const [i,sI]=useState(0);
  if(!p)return<div className="min-h-screen flex items-center justify-center pt-24"><p>Non trouvé</p><Btn ch="Retour" cl="mt-4" onClick={()=>sP('properties')}/></div>;
  return(<div className="min-h-screen bg-gray-50 pt-24">
    <div className="bg-white border-b"><div className="max-w-7xl mx-auto px-4 py-4"><div className="flex items-center gap-2 text-sm"><button onClick={()=>sP('home')} className="text-gray-500 hover:text-amber-600">Accueil</button><Ic n="chevR" c="w-4 h-4 text-gray-400"/><button onClick={()=>sP('properties')} className="text-gray-500 hover:text-amber-600">Biens</button><Ic n="chevR" c="w-4 h-4 text-gray-400"/><span className="text-gray-900 font-medium truncate">{p.ti}</span></div></div></div>
    <div className="max-w-7xl mx-auto px-4 py-8">
      <div className="grid grid-cols-4 gap-4 mb-8">
        <div className="col-span-4 md:col-span-3 relative aspect-[16/10] rounded-2xl overflow-hidden">
          <img src={p.im[i]} alt={p.ti} className="w-full h-full object-cover"/>
          {p.im.length>1&&<><button onClick={()=>sI(x=>x>0?x-1:p.im.length-1)} className="absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white/80 rounded-full hover:bg-white"><Ic n="chevL" c="w-6 h-6"/></button><button onClick={()=>sI(x=>x<p.im.length-1?x+1:0)} className="absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white/80 rounded-full hover:bg-white"><Ic n="chevR" c="w-6 h-6"/></button></>}
        </div>
        <div className="col-span-4 md:col-span-1 grid grid-cols-4 md:grid-cols-1 gap-2">{p.im.slice(0,4).map((im,x)=><div key={x} className={`relative aspect-square rounded-lg overflow-hidden cursor-pointer ${x===i?'ring-2 ring-amber-500':''}`} onClick={()=>sI(x)}><img src={im} alt="" className="w-full h-full object-cover hover:scale-110 transition-transform"/></div>)}</div>
      </div>
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div className="lg:col-span-2 space-y-8">
          <div className="bg-white rounded-2xl shadow-lg p-6">
            <div className="flex flex-wrap items-start justify-between gap-4 mb-4">
              <div><div className="flex items-center gap-2 mb-2"><Badge ch={p.tr==="Vente"?"À VENDRE":"À LOUER"} v={p.tr==="Vente"?"sale":"rent"}/><Badge ch={p.ty}/></div><h1 className="text-2xl md:text-3xl font-bold text-gray-900">{p.ti}</h1><p className="flex items-center text-gray-600 mt-2"><Ic n="map" c="w-5 h-5 mr-2 text-amber-500"/>{p.nb}, {gR(p.nb)}</p></div>
              <div className="text-right"><p className="text-3xl font-bold text-amber-600">{fP(p.pr,p.tr)}</p>{p.ty!=="Terrain"&&<p className="text-sm text-gray-500 mt-1">{Math.round(p.pr/p.su).toLocaleString('fr-FR')} FCFA/m²</p>}</div>
            </div>
            {p.ty!=="Terrain"&&<div className="grid grid-cols-2 md:grid-cols-4 gap-4 pt-6 border-t">
              <div className="text-center p-4 bg-gray-50 rounded-lg"><Ic n="square" c="w-6 h-6 text-amber-500 mx-auto mb-2"/><p className="font-bold text-gray-900">{p.su} m²</p><p className="text-sm text-gray-500">Surface</p></div>
              <div className="text-center p-4 bg-gray-50 rounded-lg"><Ic n="home" c="w-6 h-6 text-amber-500 mx-auto mb-2"/><p className="font-bold text-gray-900">{p.ro}</p><p className="text-sm text-gray-500">Pièces</p></div>
              {p.be>0&&<div className="text-center p-4 bg-gray-50 rounded-lg"><Ic n="bed" c="w-6 h-6 text-amber-500 mx-auto mb-2"/><p className="font-bold text-gray-900">{p.be}</p><p className="text-sm text-gray-500">Chambres</p></div>}
              {p.ba>0&&<div className="text-center p-4 bg-gray-50 rounded-lg"><Ic n="users" c="w-6 h-6 text-amber-500 mx-auto mb-2"/><p className="font-bold text-gray-900">{p.ba}</p><p className="text-sm text-gray-500">SDB</p></div>}
            </div>}
          </div>
          <div className="bg-white rounded-2xl shadow-lg p-6"><h2 className="text-xl font-bold text-gray-900 mb-4">Description</h2><p className="text-gray-600 leading-relaxed">{p.de}</p></div>
          {p.fe.length>0&&<div className="bg-white rounded-2xl shadow-lg p-6"><h2 className="text-xl font-bold text-gray-900 mb-4">Équipements</h2><div className="grid grid-cols-2 md:grid-cols-3 gap-4">{p.fe.map((f,x)=><div key={x} className="flex items-center gap-3"><div className="w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center"><Ic n="check" c="w-5 h-5 text-green-600"/></div><span className="text-gray-700">{f}</span></div>)}</div></div>}
        </div>
        <div className="space-y-6">
          <div className="bg-white rounded-2xl shadow-lg p-6 sticky top-24">
            <h3 className="text-lg font-bold text-gray-900 mb-4">Votre conseiller</h3>
            <div className="flex items-center gap-4 mb-6"><div className="w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center"><Ic n="users" c="w-8 h-8 text-amber-600"/></div><div><p className="font-bold text-gray-900">{p.ag.na}</p><p className="text-sm text-gray-500">Expert immobilier</p></div></div>
            <div className="space-y-3 mb-6"><a href={`tel:${p.ag.ph}`} className="flex items-center gap-3 text-gray-700 hover:text-amber-600"><Ic n="phone" c="w-5 h-5"/>{p.ag.ph}</a></div>
            <div className="space-y-3">
              <Btn ch={<><Ic n="cal" c="w-5 h-5"/>Demander une visite</>} cl="w-full" onClick={()=>sP('contact')}/>
              <a href={`https://wa.me/${CO.wa}?text=Bonjour, je suis intéressé par: ${p.ti}`} target="_blank" rel="noopener noreferrer" className="block"><Btn ch={<><Ic n="msg" c="w-5 h-5"/>WhatsApp</>} v="outline" cl="w-full bg-green-50 border-green-500 text-green-700 hover:bg-green-100"/></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>);
};

const Serv=({sP})=>(
  <div className="min-h-screen bg-gray-50 pt-24">
    <div className="bg-gradient-to-r from-gray-900 to-gray-800 py-20"><div className="max-w-7xl mx-auto px-4 text-center"><h1 className="text-4xl md:text-5xl font-bold text-white mb-4">Nos Services</h1><p className="text-xl text-gray-300">Solutions immobilières complètes</p></div></div>
    <div className="max-w-7xl mx-auto px-4 py-16 space-y-24">
      {[
        {i:'home',t:'Achat & Vente',d:'Accompagnement complet dans toutes vos transactions immobilières.',f:['Évaluation gratuite','Diffusion multi-canaux','Visites accompagnées','Négociation professionnelle','Accompagnement juridique'],im:'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=600'},
        {i:'building',t:'Location',d:'Trouvez le logement idéal ou mettez votre bien en location sereinement.',f:['Sélection locataires','État des lieux','Rédaction bail','Gestion cautions','Conseil loyers'],im:'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=600'},
        {i:'hammer',t:'Construction',d:'Projets clé en main avec les meilleurs standards de qualité.',f:['Études faisabilité','Plans architecturaux','Terrassement VRD','Construction','Garantie décennale'],im:'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=600'},
        {i:'shield',t:'Gestion Immobilière',d:'Confiez-nous la gestion de votre patrimoine.',f:['Encaissement loyers','Gestion charges','Entretien','Reporting mensuel','Optimisation fiscale'],im:'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=600'}
      ].map((s,x)=>(
        <div key={x} className={`grid grid-cols-1 lg:grid-cols-2 gap-12 items-center ${x%2===1?'lg:flex-row-reverse':''}`}>
          <div className={x%2===1?'lg:order-2':''}>
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-amber-100 text-amber-600 mb-6"><Ic n={s.i} c="w-8 h-8"/></div>
            <h2 className="text-3xl font-bold text-gray-900 mb-4">{s.t}</h2>
            <p className="text-lg text-gray-600 mb-8">{s.d}</p>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">{s.f.map((f,i)=><div key={i} className="flex items-start gap-3"><div className="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-0.5"><Ic n="check" c="w-4 h-4 text-green-600"/></div><span className="text-gray-700">{f}</span></div>)}</div>
            <Btn ch={<>Demander un devis<Ic n="arrR" c="w-5 h-5"/></>} onClick={()=>sP('contact')}/>
          </div>
          <div className={x%2===1?'lg:order-1':''}><img src={s.im} alt={s.t} className="rounded-2xl shadow-2xl w-full"/></div>
        </div>
      ))}
    </div>
    <div className="bg-amber-500 py-16"><div className="max-w-4xl mx-auto px-4 text-center">
      <h2 className="text-3xl font-bold text-white mb-4">Un projet en tête ?</h2>
      <p className="text-xl text-amber-100 mb-8">Contactez-nous pour une consultation gratuite</p>
      <div className="flex flex-col sm:flex-row gap-4 justify-center">
        <Btn ch="Nous contacter" v="white" sz="lg" onClick={()=>sP('contact')}/>
        <a href={`https://wa.me/${CO.wa}`} target="_blank" rel="noopener noreferrer"><Btn ch={<><Ic n="msg" c="w-5 h-5"/>WhatsApp</>} v="outline" sz="lg" cl="border-white text-white hover:bg-white hover:text-amber-600 w-full"/></a>
      </div>
    </div></div>
  </div>
);

const Contact=()=>{
  const [f,sF]=useState({na:'',em:'',ph:'',ms:''});
  const [se,sSe]=useState(false);
  const [loading,sLoading]=useState(false);
  const [err,sErr]=useState('');
  const hS=e=>{
    e.preventDefault();sLoading(true);sErr('');
    if(typeof emailjs!=='undefined'){
      emailjs.send('service_dialibatou','template_contact',{from_name:f.na,from_email:f.em,phone:f.ph,message:f.ms,to_email:CO.email},'YOUR_PUBLIC_KEY')
      .then(()=>{sSe(true);sLoading(false)})
      .catch(()=>{
        const wa=`https://wa.me/${CO.wa}?text=${encodeURIComponent(`Nom: ${f.na}\nEmail: ${f.em}\nTél: ${f.ph}\nMessage: ${f.ms}`)}`;
        window.open(wa,'_blank');sSe(true);sLoading(false);
      });
    }else{
      const wa=`https://wa.me/${CO.wa}?text=${encodeURIComponent(`Nom: ${f.na}\nEmail: ${f.em}\nTél: ${f.ph}\nMessage: ${f.ms}`)}`;
      window.open(wa,'_blank');sSe(true);sLoading(false);
    }
  };
  return(<div className="min-h-screen bg-gray-50 pt-24">
    <div className="bg-gradient-to-r from-gray-900 to-gray-800 py-20"><div className="max-w-7xl mx-auto px-4 text-center"><h1 className="text-4xl md:text-5xl font-bold text-white mb-4">Contactez-nous</h1><p className="text-xl text-gray-300">Notre équipe est à votre disposition</p></div></div>
    <div className="max-w-7xl mx-auto px-4 py-12">
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <div className="space-y-8">
          <div className="bg-white rounded-2xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-gray-900 mb-6">Nos coordonnées</h3>
            <div className="space-y-4">
              <div className="flex items-start gap-4"><div className="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0"><Ic n="map" c="w-6 h-6 text-amber-600"/></div><div><p className="font-medium text-gray-900">Adresse</p><p className="text-gray-600">{CO.addr}</p></div></div>
              <div className="flex items-start gap-4"><div className="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0"><Ic n="phone" c="w-6 h-6 text-amber-600"/></div><div><p className="font-medium text-gray-900">Téléphones</p>{CO.ph.map((p,i)=><a key={i} href={`tel:${p}`} className="block text-gray-600 hover:text-amber-600">{p}</a>)}</div></div>
              <div className="flex items-start gap-4"><div className="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0"><Ic n="mail" c="w-6 h-6 text-amber-600"/></div><div><p className="font-medium text-gray-900">Email</p><a href={`mailto:${CO.email}`} className="text-gray-600 hover:text-amber-600">{CO.email}</a></div></div>
              <div className="flex items-start gap-4"><div className="w-12 h-12 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0"><Ic n="clock" c="w-6 h-6 text-amber-600"/></div><div><p className="font-medium text-gray-900">Horaires</p><p className="text-gray-600">Lun - Sam: 8h00 - 18h00</p></div></div>
            </div>
          </div>
          <div className="bg-green-50 rounded-2xl p-6 border border-green-200">
            <div className="flex items-center gap-4 mb-4"><div className="w-12 h-12 rounded-full bg-green-500 flex items-center justify-center"><Ic n="msg" c="w-6 h-6 text-white"/></div><div><p className="font-bold text-gray-900">WhatsApp</p><p className="text-sm text-gray-600">Réponse rapide</p></div></div>
            <a href={`https://wa.me/${CO.wa}`} target="_blank" rel="noopener noreferrer"><Btn ch="Démarrer une conversation" cl="w-full bg-green-500 hover:bg-green-600"/></a>
          </div>
        </div>
        <div className="lg:col-span-2">
          <div className="bg-white rounded-2xl shadow-lg p-8">
            <h3 className="text-2xl font-bold text-gray-900 mb-6">Envoyez-nous un message</h3>
            {se?<div className="text-center py-12"><div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"><Ic n="check" c="w-8 h-8 text-green-600"/></div><h3 className="text-xl font-bold text-gray-900 mb-2">Message envoyé !</h3><p className="text-gray-600">Notre équipe vous contactera rapidement.</p></div>
            :<form onSubmit={hS} className="space-y-6">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div><label className="block text-sm font-medium text-gray-700 mb-2">Nom *</label><input type="text" required value={f.na} onChange={e=>sF({...f,na:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="Votre nom"/></div>
                <div><label className="block text-sm font-medium text-gray-700 mb-2">Email *</label><input type="email" required value={f.em} onChange={e=>sF({...f,em:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="votre@email.com"/></div>
              </div>
              <div><label className="block text-sm font-medium text-gray-700 mb-2">Téléphone *</label><input type="tel" required value={f.ph} onChange={e=>sF({...f,ph:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="+221 77 XXX XX XX"/></div>
              <div><label className="block text-sm font-medium text-gray-700 mb-2">Message *</label><textarea required rows={5} value={f.ms} onChange={e=>sF({...f,ms:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="Décrivez votre projet..."/></div>
              <Btn ch={loading?'Envoi en cours...':(<><Ic n="arrR" c="w-5 h-5"/>Envoyer</>)} sz="lg" cl="w-full"/>
              {err&&<p className="text-red-500 text-sm mt-2">{err}</p>}
            </form>}
          </div>
        </div>
      </div>
    </div>
  </div>);
};

const Cooperative=({sP,lots})=>{
  const [formC,sFormC]=useState({na:'',em:'',ph:'',loc:'',ty:'',ms:''});
  const [sentC,sSentC]=useState(false);
  const hSub=e=>{
    e.preventDefault();
    const wa=`https://wa.me/${CO.wa}?text=${encodeURIComponent(`[COOPÉRATIVE D'HABITAT]\nNom: ${formC.na}\nEmail: ${formC.em}\nTél: ${formC.ph}\nLocalité souhaitée: ${formC.loc}\nType de logement: ${formC.ty}\nMessage: ${formC.ms}`)}`;
    window.open(wa,'_blank');sSentC(true);
  };
  const plans=[
    {n:"Terrain Viabilisé",pr:"À partir de 150 000 FCFA/mois",su:"150 à 300 m²",du:"24 mois",fe:["Terrain borné","Titre foncier","Eau & Électricité","Voirie aménagée"],pop:false},
    {n:"Maison Économique",pr:"À partir de 250 000 FCFA/mois",su:"2 à 3 chambres",du:"36 mois",fe:["Terrain inclus","Construction clé en main","Titre foncier","Finitions complètes","Raccordements"],pop:true},
    {n:"Villa Standing",pr:"À partir de 450 000 FCFA/mois",su:"3 à 4 chambres",du:"48 mois",fe:["Terrain 300m²+","Villa R+1","Finitions haut de gamme","Jardin & Parking","Titre foncier"],pop:false}
  ];
  const steps=[
    {n:"01",t:"Adhésion",d:"Inscription à la coopérative avec un droit d'adhésion. Choix du plan et de la localité souhaitée."},
    {n:"02",t:"Épargne mensuelle",d:"Versements mensuels réguliers selon votre plan. Votre épargne constitue votre apport personnel."},
    {n:"03",t:"Acquisition terrain",d:"La coopérative négocie et acquiert les terrains en gros à des prix avantageux pour ses membres."},
    {n:"04",t:"Construction",d:"Lancement de la construction par nos équipes BTP. Suivi qualité et respect des délais."},
    {n:"05",t:"Livraison",d:"Remise des clés de votre logement avec titre foncier à votre nom. Vous êtes propriétaire !"}
  ];
  const faqs=[
    {q:"Qui peut adhérer à la coopérative ?",a:"Toute personne physique majeure résidant au Sénégal ou à l'étranger (diaspora). Salariés, commerçants, entrepreneurs, fonctionnaires sont les bienvenus."},
    {q:"Quel est le montant du droit d'adhésion ?",a:"Le droit d'adhésion est de 50 000 FCFA. Ce montant unique couvre les frais administratifs et vous donne accès à tous les avantages de la coopérative."},
    {q:"Puis-je choisir ma localité ?",a:"Oui, vous choisissez parmi nos localités disponibles : Bambilor, Thiès, Diass, Bayakh, Keur Massar, Sébikotane, Kounoune, et bien d'autres."},
    {q:"Que se passe-t-il si je ne peux plus payer ?",a:"Vous pouvez suspendre vos versements pendant 3 mois maximum. Au-delà, votre épargne vous est restituée déduction faite des frais de gestion (10%)."},
    {q:"Le titre foncier est-il garanti ?",a:"Absolument. Tous nos terrains disposent d'un titre foncier ou d'un bail emphytéotique. Le transfert de propriété est effectué chez le notaire."},
    {q:"Quand commence la construction ?",a:"La construction démarre dès que 70% du plan d'épargne est atteint. Les travaux durent entre 6 et 12 mois selon le type de logement."}
  ];
  const [openFaq,sOpenFaq]=useState(null);
  return(<div className="min-h-screen bg-gray-50 pt-24">
    {/* HERO */}
    <div className="relative bg-gradient-to-r from-gray-900 to-gray-800 py-20 overflow-hidden">
      <div className="absolute inset-0 opacity-20"><img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=1920" alt="" className="w-full h-full object-cover"/></div>
      <div className="relative max-w-7xl mx-auto px-4 text-center">
        <div className="inline-flex items-center gap-2 bg-amber-500/20 border border-amber-500/30 rounded-full px-4 py-2 mb-6"><span className="w-2 h-2 bg-amber-500 rounded-full animate-pulse"/><span className="text-amber-400 text-sm font-medium">Devenez propriétaire</span></div>
        <h1 className="text-4xl md:text-5xl font-bold text-white mb-4">Coopérative d'Habitat</h1>
        <p className="text-xl text-gray-300 max-w-3xl mx-auto mb-8">Accédez à la propriété grâce à l'épargne collective. Terrains viabilisés et logements construits à des prix imbattables.</p>
        <div className="flex flex-col sm:flex-row gap-4 justify-center">
          <Btn ch={<><Ic n="arrR" c="w-5 h-5"/>Rejoindre la coopérative</>} sz="lg" onClick={()=>document.getElementById('coop-form').scrollIntoView({behavior:'smooth'})}/>
          <Btn ch={<><Ic n="msg" c="w-5 h-5"/>WhatsApp</>} v="outline" sz="lg" cl="border-white text-white hover:bg-white hover:text-amber-600" onClick={()=>window.open(`https://wa.me/${CO.wa}?text=Bonjour, je souhaite des informations sur la coopérative d'habitat.`,'_blank')}/>
        </div>
      </div>
    </div>

    {/* AVANTAGES */}
    <section className="py-20 bg-white">
      <div className="max-w-7xl mx-auto px-4">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Pourquoi nous rejoindre</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Les avantages de la coopérative</h2></div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {[
            {i:"home",t:"Prix réduits",d:"Achat groupé de terrains = prix 30 à 50% moins cher que le marché"},
            {i:"shield",t:"Sécurité juridique",d:"Titre foncier garanti, transactions notariées, zéro arnaque"},
            {i:"users",t:"Force collective",d:"L'union fait la force : négociation, suivi, entraide entre membres"},
            {i:"clock",t:"Épargne flexible",d:"Versements mensuels adaptés à votre budget, sans crédit bancaire"}
          ].map((a,i)=><div key={i} className="text-center p-6 rounded-2xl bg-gray-50 hover:shadow-lg transition-all">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-amber-100 text-amber-600 mb-4"><Ic n={a.i} c="w-8 h-8"/></div>
            <h3 className="text-lg font-bold text-gray-900 mb-2">{a.t}</h3><p className="text-gray-600 text-sm">{a.d}</p>
          </div>)}
        </div>
      </div>
    </section>

    {/* COMMENT ÇA MARCHE */}
    <section className="py-20 bg-gray-50">
      <div className="max-w-7xl mx-auto px-4">
        <div className="text-center mb-16"><span className="text-amber-600 font-semibold uppercase tracking-wider">Processus</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Comment ça marche ?</h2></div>
        <div className="relative">
          <div className="hidden lg:block absolute top-1/2 left-0 right-0 h-0.5 bg-amber-200 -translate-y-1/2"/>
          <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-8">
            {steps.map((s,i)=><div key={i} className="relative text-center">
              <div className="relative z-10 inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-amber-500 to-amber-600 text-white text-xl font-bold mb-4 shadow-lg">{s.n}</div>
              <h3 className="text-lg font-bold text-gray-900 mb-2">{s.t}</h3>
              <p className="text-gray-600 text-sm">{s.d}</p>
            </div>)}
          </div>
        </div>
      </div>
    </section>

    {/* PLANS */}
    <section className="py-20 bg-white">
      <div className="max-w-7xl mx-auto px-4">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Nos offres</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Choisissez votre plan</h2></div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          {plans.map((p,i)=><div key={i} className={`relative rounded-2xl p-8 ${p.pop?'bg-gradient-to-b from-amber-500 to-amber-600 text-white shadow-2xl scale-105':'bg-white border-2 border-gray-200 shadow-lg'}`}>
            {p.pop&&<div className="absolute -top-4 left-1/2 -translate-x-1/2 bg-white text-amber-600 px-4 py-1 rounded-full text-sm font-bold shadow">Populaire</div>}
            <h3 className={`text-2xl font-bold mb-2 ${p.pop?'text-white':'text-gray-900'}`}>{p.n}</h3>
            <p className={`text-lg font-semibold mb-1 ${p.pop?'text-amber-100':'text-amber-600'}`}>{p.pr}</p>
            <p className={`text-sm mb-6 ${p.pop?'text-amber-200':'text-gray-500'}`}>{p.su} — Durée: {p.du}</p>
            <ul className="space-y-3 mb-8">
              {p.fe.map((f,x)=><li key={x} className="flex items-center gap-3">
                <div className={`w-5 h-5 rounded-full flex items-center justify-center ${p.pop?'bg-white/20':'bg-green-100'}`}><Ic n="check" c={`w-3 h-3 ${p.pop?'text-white':'text-green-600'}`}/></div>
                <span className={p.pop?'text-white':'text-gray-700'}>{f}</span>
              </li>)}
            </ul>
            <Btn ch="Choisir ce plan" v={p.pop?"white":"primary"} cl="w-full" onClick={()=>document.getElementById('coop-form').scrollIntoView({behavior:'smooth'})}/>
          </div>)}
        </div>
      </div>
    </section>

    {/* LOCALITÉS DISPONIBLES */}
    <section className="py-20 bg-gray-50">
      <div className="max-w-7xl mx-auto px-4">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Nos sites</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Localités disponibles</h2></div>
        <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
          {["Bambilor","Thiès","Diass","Bayakh","Keur Massar","Sébikotane","Kounoune","Pout","Sindia","Malikounda","Gorom","Tivaouane Peulh","Ndoukhoura Peulh","Niagues","Niacourap","Nguérigne","Keur Ndiaye Lo","Ndayane"].map((l,i)=><div key={i} className="bg-white rounded-xl p-4 text-center shadow hover:shadow-lg hover:border-amber-500 border-2 border-transparent transition-all cursor-pointer" onClick={()=>sP('properties')}>
            <Ic n="map" c="w-5 h-5 text-amber-500 mx-auto mb-2"/>
            <p className="text-sm font-medium text-gray-900">{l}</p>
            <p className="text-xs text-gray-500">{P.filter(p=>p.nb===l).length} bien{P.filter(p=>p.nb===l).length>1?'s':''}</p>
          </div>)}
        </div>
      </div>
    </section>

    {/* TERRAINS LOTISSÉS */}
    <section className="py-20 bg-white">
      <div className="max-w-7xl mx-auto px-4">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Lotissements</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Terrains Lotissés Disponibles</h2><p className="text-gray-600 mt-4 max-w-2xl mx-auto">Parcelles viabilisées prêtes à construire dans nos différentes zones. Titre foncier garanti.</p></div>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          {lots.map((lot,i)=><div key={lot.id} className="bg-white border-2 border-gray-100 rounded-2xl overflow-hidden hover:border-amber-500 hover:shadow-xl transition-all">
            <div className="bg-gradient-to-r from-amber-500 to-amber-600 p-4">
              <div className="flex items-center justify-between">
                <span className="text-white font-bold text-lg">{lot.loc}</span>
                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${lot.st==='Disponible'?'bg-green-100 text-green-700':'bg-orange-100 text-orange-700'}`}>{lot.st}</span>
              </div>
              <p className="text-amber-100 text-sm">{lot.zone}</p>
            </div>
            <div className="p-5">
              <div className="flex items-center justify-between mb-4">
                <div><p className="text-2xl font-bold text-amber-600">{(lot.pr/1000000).toFixed(1)} M</p><p className="text-xs text-gray-500">FCFA/parcelle</p></div>
                <div className="text-right"><p className="text-2xl font-bold text-gray-900">{lot.su}</p><p className="text-xs text-gray-500">m²/lot</p></div>
              </div>
              <div className="flex items-center justify-between py-3 border-t border-b border-gray-100 mb-4">
                <div className="text-center"><p className="text-lg font-bold text-gray-900">{lot.lots}</p><p className="text-xs text-gray-500">Total lots</p></div>
                <div className="text-center"><p className="text-lg font-bold text-green-600">{lot.dispo}</p><p className="text-xs text-gray-500">Disponibles</p></div>
                <div className="text-center"><p className="text-lg font-bold text-gray-400">{lot.lots-lot.dispo}</p><p className="text-xs text-gray-500">Réservés</p></div>
              </div>
              <div className="space-y-2 mb-4">{lot.fe.slice(0,3).map((f,x)=><div key={x} className="flex items-center gap-2 text-sm text-gray-600"><Ic n="check" c="w-4 h-4 text-green-500"/>{f}</div>)}{lot.fe.length>3&&<p className="text-xs text-gray-400">+{lot.fe.length-3} autres</p>}</div>
              <Btn ch="Réserver un lot" cl="w-full" onClick={()=>document.getElementById('coop-form').scrollIntoView({behavior:'smooth'})}/>
            </div>
          </div>)}
        </div>
        {lots.length===0&&<div className="text-center py-12"><Ic n="map" c="w-16 h-16 text-gray-300 mx-auto mb-4"/><p className="text-gray-500">Aucun lotissement disponible pour le moment</p></div>}
      </div>
    </section>

    {/* STATS COOPÉRATIVE */}
    <section className="py-16 bg-gradient-to-r from-gray-900 to-gray-800">
      <div className="max-w-7xl mx-auto px-4">
        <div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
          {[{v:"500+",l:"Membres actifs"},{v:"18",l:"Localités couvertes"},{v:"200+",l:"Logements livrés"},{v:"95%",l:"Taux de satisfaction"}].map((s,i)=><div key={i}><p className="text-3xl md:text-4xl font-bold text-amber-500">{s.v}</p><p className="text-gray-300 text-sm mt-1">{s.l}</p></div>)}
        </div>
      </div>
    </section>

    {/* FAQ */}
    <section className="py-20 bg-white">
      <div className="max-w-3xl mx-auto px-4">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">FAQ</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Questions fréquentes</h2></div>
        <div className="space-y-4">
          {faqs.map((f,i)=><div key={i} className="bg-gray-50 rounded-xl overflow-hidden">
            <button onClick={()=>sOpenFaq(openFaq===i?null:i)} className="w-full flex items-center justify-between p-5 text-left">
              <span className="font-semibold text-gray-900">{f.q}</span>
              <Ic n={openFaq===i?"x":"chevR"} c="w-5 h-5 text-amber-500 flex-shrink-0"/>
            </button>
            {openFaq===i&&<div className="px-5 pb-5"><p className="text-gray-600">{f.a}</p></div>}
          </div>)}
        </div>
      </div>
    </section>

    {/* FORMULAIRE D'INSCRIPTION */}
    <section id="coop-form" className="py-20 bg-gray-50">
      <div className="max-w-4xl mx-auto px-4">
        <div className="text-center mb-12"><span className="text-amber-600 font-semibold uppercase tracking-wider">Inscription</span><h2 className="text-3xl md:text-4xl font-bold text-gray-900 mt-2">Rejoindre la coopérative</h2><p className="text-gray-600 mt-4">Remplissez le formulaire ci-dessous et nous vous contacterons dans les 24h.</p></div>
        <div className="bg-white rounded-2xl shadow-xl p-8">
          {sentC?<div className="text-center py-12"><div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"><Ic n="check" c="w-10 h-10 text-green-600"/></div><h3 className="text-2xl font-bold text-gray-900 mb-2">Demande envoyée !</h3><p className="text-gray-600 mb-4">Un conseiller vous contactera très bientôt.</p><Btn ch="Retour à l'accueil" onClick={()=>sP('home')}/></div>
          :<form onSubmit={hSub} className="space-y-6">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div><label className="block text-sm font-medium text-gray-700 mb-2">Nom complet *</label><input type="text" required value={formC.na} onChange={e=>sFormC({...formC,na:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="Votre nom complet"/></div>
              <div><label className="block text-sm font-medium text-gray-700 mb-2">Email *</label><input type="email" required value={formC.em} onChange={e=>sFormC({...formC,em:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="votre@email.com"/></div>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div><label className="block text-sm font-medium text-gray-700 mb-2">Téléphone *</label><input type="tel" required value={formC.ph} onChange={e=>sFormC({...formC,ph:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="+221 77 XXX XX XX"/></div>
              <div><label className="block text-sm font-medium text-gray-700 mb-2">Localité souhaitée</label>
                <select value={formC.loc} onChange={e=>sFormC({...formC,loc:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"><option value="">Choisir une localité</option>{NB.map(n=><option key={n} value={n}>{n}</option>)}</select>
              </div>
            </div>
            <div><label className="block text-sm font-medium text-gray-700 mb-2">Type de logement souhaité</label>
              <select value={formC.ty} onChange={e=>sFormC({...formC,ty:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"><option value="">Choisir un plan</option><option value="Terrain Viabilisé">Terrain Viabilisé</option><option value="Maison Économique">Maison Économique</option><option value="Villa Standing">Villa Standing</option></select>
            </div>
            <div><label className="block text-sm font-medium text-gray-700 mb-2">Message (optionnel)</label><textarea rows={4} value={formC.ms} onChange={e=>sFormC({...formC,ms:e.target.value})} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="Précisez vos besoins ou posez vos questions..."/></div>
            <Btn ch={<><Ic n="arrR" c="w-5 h-5"/>Envoyer ma demande</>} sz="lg" cl="w-full"/>
          </form>}
        </div>
      </div>
    </section>

    {/* CTA FINAL */}
    <section className="py-16 bg-gradient-to-r from-amber-500 to-amber-600">
      <div className="max-w-4xl mx-auto px-4 text-center">
        <h2 className="text-3xl font-bold text-white mb-4">Besoin de plus d'informations ?</h2>
        <p className="text-amber-100 mb-8">Appelez-nous ou envoyez un message WhatsApp</p>
        <div className="flex flex-col sm:flex-row gap-4 justify-center">
          <a href={`tel:${CO.ph[0]}`}><Btn ch={<><Ic n="phone" c="w-5 h-5"/>{CO.ph[0]}</>} v="white" sz="lg"/></a>
          <a href={`https://wa.me/${CO.wa}`} target="_blank" rel="noopener noreferrer"><Btn ch={<><Ic n="msg" c="w-5 h-5"/>WhatsApp</>} v="outline" sz="lg" cl="border-white text-white hover:bg-white hover:text-amber-600"/></a>
        </div>
      </div>
    </section>
  </div>);
};

// ADMIN INTERFACE
const Admin=({sP,data})=>{
  const [auth,sAuth]=useState(()=>sessionStorage.getItem('dialibatou_admin')==='true');
  const [pwd,sPwd]=useState('');
  const [err,sErr]=useState('');
  const [tab,sTab]=useState('dashboard');
  const [editProp,sEditProp]=useState(null);
  const [editLot,sEditLot]=useState(null);
  const [props,setProps]=useState(data.properties||P);
  const [lots,setLots]=useState(data.lots);

  const login=()=>{if(pwd===CO.adminPwd){sAuth(true);sessionStorage.setItem('dialibatou_admin','true');sErr('')}else{sErr('Mot de passe incorrect')}};
  const logout=()=>{sAuth(false);sessionStorage.removeItem('dialibatou_admin')};

  const saveProp=(p)=>{
    const newProps=editProp?.id?props.map(x=>x.id===p.id?p:x):[...props,{...p,id:'p'+Date.now()}];
    setProps(newProps);data.updateProps(newProps);sEditProp(null);
  };
  const delProp=(id)=>{if(confirm('Supprimer cette propriété ?')){const newProps=props.filter(x=>x.id!==id);setProps(newProps);data.updateProps(newProps)}};

  const saveLot=(l)=>{
    const newLots=editLot?.id?lots.map(x=>x.id===l.id?l:x):[...lots,{...l,id:'lot'+Date.now()}];
    setLots(newLots);data.updateLots(newLots);sEditLot(null);
  };
  const delLot=(id)=>{if(confirm('Supprimer ce lotissement ?')){const newLots=lots.filter(x=>x.id!==id);setLots(newLots);data.updateLots(newLots)}};

  const exportData=()=>{
    const d={properties:props,lots};
    const blob=new Blob([JSON.stringify(d,null,2)],{type:'application/json'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');a.href=url;a.download='dialibatou_data.json';a.click();
  };
  const importData=(e)=>{
    const f=e.target.files[0];if(!f)return;
    const reader=new FileReader();
    reader.onload=(ev)=>{
      try{
        const d=JSON.parse(ev.target.result);
        if(d.properties){setProps(d.properties);data.updateProps(d.properties)}
        if(d.lots){setLots(d.lots);data.updateLots(d.lots)}
        alert('Données importées avec succès !');
      }catch{alert('Erreur: fichier invalide')}
    };reader.readAsText(f);
  };

  // Login screen
  if(!auth)return(
    <div className="min-h-screen bg-gray-100 pt-24 flex items-center justify-center">
      <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
        <div className="text-center mb-8"><Logo sz="lg"/><h1 className="text-2xl font-bold text-gray-900 mt-4">Administration</h1><p className="text-gray-500">Connectez-vous pour gérer le site</p></div>
        <div className="space-y-4">
          <div><label className="block text-sm font-medium text-gray-700 mb-2">Mot de passe</label><input type="password" value={pwd} onChange={e=>sPwd(e.target.value)} onKeyDown={e=>e.key==='Enter'&&login()} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" placeholder="Entrez le mot de passe"/></div>
          {err&&<p className="text-red-500 text-sm">{err}</p>}
          <Btn ch="Se connecter" cl="w-full" onClick={login}/>
          <button onClick={()=>sP('home')} className="w-full text-center text-gray-500 hover:text-amber-600 text-sm">Retour au site</button>
        </div>
      </div>
    </div>
  );

  // Property form
  const PropForm=({p,onSave,onCancel})=>{
    const [f,sF]=useState(p||{ti:'',de:'',ty:'Appartement',tr:'Vente',pr:0,nb:'',su:0,ro:0,be:0,ba:0,fe:[],im:[],vd:[],ft:false,vi:0,ag:{na:'Amadou Diallo',ph:CO.ph[0]}});
    const [feInput,sFeInput]=useState('');
    const [vdInput,sVdInput]=useState('');
    const [uploading,setUploading]=useState(false);
    const fileInputRef=useRef(null);

    const handlePhotoUpload=(e)=>{
      const files=Array.from(e.target.files);
      if(files.length===0)return;
      setUploading(true);
      const promises=files.map(file=>new Promise((resolve)=>{
        const reader=new FileReader();
        reader.onload=(ev)=>resolve(ev.target.result);
        reader.readAsDataURL(file);
      }));
      Promise.all(promises).then(results=>{
        sF({...f,im:[...f.im,...results]});
        setUploading(false);
        if(fileInputRef.current)fileInputRef.current.value='';
      });
    };

    return(
      <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div className="bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
          <div className="p-6 border-b sticky top-0 bg-white"><h3 className="text-xl font-bold">{p?'Modifier':'Ajouter'} une propriété</h3></div>
          <div className="p-6 space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="md:col-span-2"><label className="block text-sm font-medium mb-1">Titre *</label><input value={f.ti} onChange={e=>sF({...f,ti:e.target.value})} className="w-full px-3 py-2 border rounded-lg" placeholder="Ex: Villa Moderne Almadies"/></div>
              <div className="md:col-span-2"><label className="block text-sm font-medium mb-1">Description</label><textarea value={f.de} onChange={e=>sF({...f,de:e.target.value})} rows={3} className="w-full px-3 py-2 border rounded-lg" placeholder="Description détaillée..."/></div>
              <div><label className="block text-sm font-medium mb-1">Type</label><select value={f.ty} onChange={e=>sF({...f,ty:e.target.value})} className="w-full px-3 py-2 border rounded-lg">{TY.map(t=><option key={t}>{t}</option>)}</select></div>
              <div><label className="block text-sm font-medium mb-1">Transaction</label><select value={f.tr} onChange={e=>sF({...f,tr:e.target.value})} className="w-full px-3 py-2 border rounded-lg"><option>Vente</option><option>Location</option></select></div>
              <div><label className="block text-sm font-medium mb-1">Prix (FCFA)</label><input type="number" value={f.pr} onChange={e=>sF({...f,pr:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Localité</label><select value={f.nb} onChange={e=>sF({...f,nb:e.target.value})} className="w-full px-3 py-2 border rounded-lg"><option value="">Choisir</option>{NB.map(n=><option key={n}>{n}</option>)}</select></div>
              <div><label className="block text-sm font-medium mb-1">Surface (m²)</label><input type="number" value={f.su} onChange={e=>sF({...f,su:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Pièces</label><input type="number" value={f.ro} onChange={e=>sF({...f,ro:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Chambres</label><input type="number" value={f.be} onChange={e=>sF({...f,be:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Salles de bain</label><input type="number" value={f.ba} onChange={e=>sF({...f,ba:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>

              {/* Photos - Upload fichiers */}
              <div className="md:col-span-2">
                <label className="block text-sm font-medium mb-2">Photos</label>
                <div className="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-amber-500 transition-colors">
                  <input ref={fileInputRef} type="file" accept="image/*" multiple onChange={handlePhotoUpload} className="hidden" id="photo-upload"/>
                  <label htmlFor="photo-upload" className="cursor-pointer">
                    <svg className="w-10 h-10 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                    <p className="text-gray-600 font-medium">{uploading?'Chargement...':'Cliquez pour ajouter des photos'}</p>
                    <p className="text-gray-400 text-sm">PNG, JPG, JPEG (plusieurs fichiers possibles)</p>
                  </label>
                </div>
                {f.im.length>0&&(
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2 mt-3">
                    {f.im.map((url,i)=>url&&(
                      <div key={i} className="relative group">
                        <img src={url} alt={`Photo ${i+1}`} className="w-full h-24 object-cover rounded-lg border"/>
                        <button onClick={()=>sF({...f,im:f.im.filter((_,j)=>j!==i)})} className="absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-lg">&times;</button>
                        <span className="absolute bottom-1 left-1 bg-black/60 text-white text-xs px-2 py-0.5 rounded">{i+1}</span>
                      </div>
                    ))}
                  </div>
                )}
                <p className="text-gray-500 text-sm mt-2">{f.im.length} photo(s) ajoutée(s)</p>
              </div>

              {/* Vidéos */}
              <div className="md:col-span-2">
                <label className="block text-sm font-medium mb-2">Vidéos</label>
                <div className="flex gap-2 mb-3">
                  <input value={vdInput} onChange={e=>sVdInput(e.target.value)} className="flex-1 px-3 py-2 border rounded-lg" placeholder="Lien YouTube: https://www.youtube.com/watch?v=..."/>
                  <Btn ch="+ Lien" sz="sm" onClick={()=>{if(vdInput){sF({...f,vd:[...(f.vd||[]),{type:'url',src:vdInput}]});sVdInput('')}}}/>
                </div>
                <div className="text-center text-gray-400 text-sm mb-3">— ou télécharger un fichier vidéo —</div>
                <div className="border-2 border-dashed border-gray-300 rounded-lg p-3 text-center hover:border-amber-500 transition-colors">
                  <input type="file" accept="video/*" onChange={(e)=>{
                    const file=e.target.files[0];if(!file)return;
                    if(file.size>50*1024*1024){alert('Fichier trop volumineux (max 50 MB)');return}
                    const reader=new FileReader();
                    reader.onload=(ev)=>sF({...f,vd:[...(f.vd||[]),{type:'file',src:ev.target.result,name:file.name}]});
                    reader.readAsDataURL(file);
                    e.target.value='';
                  }} className="hidden" id="video-upload"/>
                  <label htmlFor="video-upload" className="cursor-pointer flex items-center justify-center gap-2">
                    <svg className="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                    <span className="text-gray-600">Cliquez pour ajouter une vidéo (max 50 MB)</span>
                  </label>
                </div>
                {(f.vd||[]).length>0&&(
                  <div className="space-y-2 mt-3">
                    {(f.vd||[]).map((v,i)=>(
                      <div key={i} className="flex items-center gap-2 bg-gray-50 p-2 rounded-lg">
                        {v.type==='url'?(
                          <svg className="w-5 h-5 text-red-500 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                        ):(
                          <svg className="w-5 h-5 text-blue-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"/></svg>
                        )}
                        <span className="flex-1 text-sm truncate">{v.type==='url'?v.src:v.name}</span>
                        <span className="text-xs text-gray-400">{v.type==='url'?'YouTube':'Fichier'}</span>
                        <button onClick={()=>sF({...f,vd:f.vd.filter((_,j)=>j!==i)})} className="text-red-500 hover:text-red-700 text-lg">&times;</button>
                      </div>
                    ))}
                  </div>
                )}
                <p className="text-gray-500 text-sm mt-2">{(f.vd||[]).length} vidéo(s) ajoutée(s)</p>
              </div>

              <div className="md:col-span-2">
                <label className="block text-sm font-medium mb-1">Équipements</label>
                <div className="flex gap-2 mb-2"><input value={feInput} onChange={e=>sFeInput(e.target.value)} className="flex-1 px-3 py-2 border rounded-lg" placeholder="Ex: Piscine"/><Btn ch="+" sz="sm" onClick={()=>{if(feInput){sF({...f,fe:[...f.fe,feInput]});sFeInput('')}}}/></div>
                <div className="flex flex-wrap gap-2">{f.fe.map((x,i)=><span key={i} className="bg-gray-100 px-3 py-1 rounded-full text-sm flex items-center gap-2">{x}<button onClick={()=>sF({...f,fe:f.fe.filter((_,j)=>j!==i)})} className="text-red-500">&times;</button></span>)}</div>
              </div>
              <div className="flex items-center gap-2"><input type="checkbox" checked={f.ft} onChange={e=>sF({...f,ft:e.target.checked})} id="ft"/><label htmlFor="ft" className="text-sm">Propriété en vedette (Premium)</label></div>
            </div>
          </div>
          <div className="p-6 border-t flex gap-3 justify-end">
            <Btn ch="Annuler" v="ghost" onClick={onCancel}/>
            <Btn ch={p?'Mettre à jour':'Ajouter'} onClick={()=>{if(!f.ti||!f.nb){alert('Titre et localité requis');return}onSave(f)}}/>
          </div>
        </div>
      </div>
    );
  };

  // Lot form
  const LotForm=({l,onSave,onCancel})=>{
    const [f,sF]=useState(l||{loc:'',zone:'',lots:0,dispo:0,su:0,pr:0,st:'Disponible',fe:[]});
    const [feInput,sFeInput]=useState('');
    return(
      <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
        <div className="bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
          <div className="p-6 border-b"><h3 className="text-xl font-bold">{l?'Modifier':'Ajouter'} un lotissement</h3></div>
          <div className="p-6 space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div><label className="block text-sm font-medium mb-1">Localité *</label><select value={f.loc} onChange={e=>sF({...f,loc:e.target.value})} className="w-full px-3 py-2 border rounded-lg"><option value="">Choisir</option>{NB.map(n=><option key={n}>{n}</option>)}</select></div>
              <div><label className="block text-sm font-medium mb-1">Zone/Nom</label><input value={f.zone} onChange={e=>sF({...f,zone:e.target.value})} className="w-full px-3 py-2 border rounded-lg" placeholder="Ex: Zone A, Cité Dialibatou"/></div>
              <div><label className="block text-sm font-medium mb-1">Nombre total de lots</label><input type="number" value={f.lots} onChange={e=>sF({...f,lots:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Lots disponibles</label><input type="number" value={f.dispo} onChange={e=>sF({...f,dispo:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Surface par lot (m²)</label><input type="number" value={f.su} onChange={e=>sF({...f,su:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Prix par lot (FCFA)</label><input type="number" value={f.pr} onChange={e=>sF({...f,pr:+e.target.value})} className="w-full px-3 py-2 border rounded-lg"/></div>
              <div><label className="block text-sm font-medium mb-1">Statut</label><select value={f.st} onChange={e=>sF({...f,st:e.target.value})} className="w-full px-3 py-2 border rounded-lg"><option>Disponible</option><option>Limité</option><option>Épuisé</option></select></div>
              <div className="md:col-span-2">
                <label className="block text-sm font-medium mb-1">Caractéristiques</label>
                <div className="flex gap-2 mb-2"><input value={feInput} onChange={e=>sFeInput(e.target.value)} className="flex-1 px-3 py-2 border rounded-lg" placeholder="Ex: Titre foncier"/><Btn ch="+" sz="sm" onClick={()=>{if(feInput){sF({...f,fe:[...f.fe,feInput]});sFeInput('')}}}/></div>
                <div className="flex flex-wrap gap-2">{f.fe.map((x,i)=><span key={i} className="bg-gray-100 px-3 py-1 rounded-full text-sm flex items-center gap-2">{x}<button onClick={()=>sF({...f,fe:f.fe.filter((_,j)=>j!==i)})} className="text-red-500">&times;</button></span>)}</div>
              </div>
            </div>
          </div>
          <div className="p-6 border-t flex gap-3 justify-end">
            <Btn ch="Annuler" v="ghost" onClick={onCancel}/>
            <Btn ch={l?'Mettre à jour':'Ajouter'} onClick={()=>{if(!f.loc){alert('Localité requise');return}onSave(f)}}/>
          </div>
        </div>
      </div>
    );
  };

  // Admin Dashboard
  return(
    <div className="min-h-screen bg-gray-100 pt-20">
      {editProp!==null&&<PropForm p={editProp.id?editProp:null} onSave={saveProp} onCancel={()=>sEditProp(null)}/>}
      {editLot!==null&&<LotForm l={editLot.id?editLot:null} onSave={saveLot} onCancel={()=>sEditLot(null)}/>}

      <div className="bg-white border-b shadow-sm sticky top-20 z-30">
        <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
          <div className="flex items-center gap-4">
            <h1 className="text-xl font-bold text-gray-900">Administration</h1>
            <div className="flex gap-1">
              {[{id:'dashboard',l:'Tableau de bord',i:'home'},{id:'properties',l:'Propriétés',i:'building'},{id:'lots',l:'Lotissements',i:'map'}].map(t=>
                <button key={t.id} onClick={()=>sTab(t.id)} className={`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 ${tab===t.id?'bg-amber-100 text-amber-700':'text-gray-600 hover:bg-gray-100'}`}><Ic n={t.i} c="w-4 h-4"/><span className="hidden sm:inline">{t.l}</span></button>
              )}
            </div>
          </div>
          <div className="flex items-center gap-3">
            <button onClick={()=>sP('home')} className="text-gray-500 hover:text-amber-600 text-sm">Voir le site</button>
            <Btn ch="Déconnexion" v="ghost" sz="sm" onClick={logout}/>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 py-8">
        {/* Dashboard */}
        {tab==='dashboard'&&<div className="space-y-8">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
            {[{l:'Propriétés',v:props.length,i:'building',c:'bg-blue-500'},{l:'Lotissements',v:lots.length,i:'map',c:'bg-green-500'},{l:'Lots disponibles',v:lots.reduce((a,l)=>a+l.dispo,0),i:'check',c:'bg-amber-500'},{l:'En vedette',v:props.filter(p=>p.ft).length,i:'star',c:'bg-purple-500'}].map((s,i)=>
              <div key={i} className="bg-white rounded-xl p-6 shadow-sm">
                <div className={`w-12 h-12 ${s.c} rounded-lg flex items-center justify-center mb-4`}><Ic n={s.i} c="w-6 h-6 text-white"/></div>
                <p className="text-3xl font-bold text-gray-900">{s.v}</p>
                <p className="text-gray-500 text-sm">{s.l}</p>
              </div>
            )}
          </div>
          <div className="bg-white rounded-xl p-6 shadow-sm">
            <h3 className="text-lg font-bold text-gray-900 mb-4">Actions rapides</h3>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <button onClick={()=>{sTab('properties');sEditProp({})}} className="p-4 border-2 border-dashed rounded-xl hover:border-amber-500 hover:bg-amber-50 transition-all text-left">
                <Ic n="building" c="w-8 h-8 text-amber-500 mb-2"/>
                <p className="font-semibold text-gray-900">Ajouter une propriété</p>
                <p className="text-sm text-gray-500">Villa, appartement, terrain...</p>
              </button>
              <button onClick={()=>{sTab('lots');sEditLot({})}} className="p-4 border-2 border-dashed rounded-xl hover:border-green-500 hover:bg-green-50 transition-all text-left">
                <Ic n="map" c="w-8 h-8 text-green-500 mb-2"/>
                <p className="font-semibold text-gray-900">Ajouter un lotissement</p>
                <p className="text-sm text-gray-500">Terrains coopérative...</p>
              </button>
              <button onClick={exportData} className="p-4 border-2 border-dashed rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-left">
                <Ic n="arrR" c="w-8 h-8 text-blue-500 mb-2"/>
                <p className="font-semibold text-gray-900">Exporter les données</p>
                <p className="text-sm text-gray-500">Sauvegarde JSON...</p>
              </button>
            </div>
          </div>
          <div className="bg-white rounded-xl p-6 shadow-sm">
            <h3 className="text-lg font-bold text-gray-900 mb-4">Import/Export</h3>
            <div className="flex flex-col sm:flex-row gap-4">
              <div className="flex-1"><label className="block text-sm font-medium text-gray-700 mb-2">Importer des données</label><input type="file" accept=".json" onChange={importData} className="w-full text-sm"/></div>
              <div className="flex-1"><label className="block text-sm font-medium text-gray-700 mb-2">Exporter les données</label><Btn ch="Télécharger JSON" v="outline" onClick={exportData}/></div>
              <div className="flex-1"><label className="block text-sm font-medium text-gray-700 mb-2">Réinitialiser</label><Btn ch="Données par défaut" v="ghost" onClick={()=>{if(confirm('Réinitialiser toutes les données ?')){data.resetData();setProps(P);setLots(LOTS_INIT)}}}/></div>
            </div>
          </div>
        </div>}

        {/* Properties management */}
        {tab==='properties'&&<div className="space-y-6">
          <div className="flex items-center justify-between">
            <h2 className="text-2xl font-bold text-gray-900">Propriétés ({props.length})</h2>
            <Btn ch={<><Ic n="building" c="w-4 h-4"/>Ajouter</>} onClick={()=>sEditProp({})}/>
          </div>
          <div className="bg-white rounded-xl shadow-sm overflow-hidden">
            <table className="w-full">
              <thead className="bg-gray-50"><tr><th className="px-4 py-3 text-left text-sm font-semibold text-gray-900">Propriété</th><th className="px-4 py-3 text-left text-sm font-semibold text-gray-900 hidden md:table-cell">Type</th><th className="px-4 py-3 text-left text-sm font-semibold text-gray-900">Prix</th><th className="px-4 py-3 text-left text-sm font-semibold text-gray-900 hidden sm:table-cell">Localité</th><th className="px-4 py-3 text-right text-sm font-semibold text-gray-900">Actions</th></tr></thead>
              <tbody className="divide-y">
                {props.map(p=><tr key={p.id} className="hover:bg-gray-50">
                  <td className="px-4 py-3"><div className="flex items-center gap-3">{p.im?.[0]&&<img src={p.im[0]} className="w-12 h-12 rounded-lg object-cover"/>}<div><p className="font-medium text-gray-900 line-clamp-1">{p.ti}</p>{p.ft&&<span className="text-xs text-amber-600">Premium</span>}</div></div></td>
                  <td className="px-4 py-3 hidden md:table-cell"><span className="px-2 py-1 bg-gray-100 rounded-full text-xs">{p.ty}</span></td>
                  <td className="px-4 py-3 font-semibold text-amber-600">{fP(p.pr,p.tr)}</td>
                  <td className="px-4 py-3 text-gray-500 hidden sm:table-cell">{p.nb}</td>
                  <td className="px-4 py-3 text-right"><div className="flex items-center justify-end gap-2"><button onClick={()=>sEditProp(p)} className="p-2 hover:bg-amber-100 rounded-lg text-amber-600"><Ic n="hammer" c="w-4 h-4"/></button><button onClick={()=>delProp(p.id)} className="p-2 hover:bg-red-100 rounded-lg text-red-600"><Ic n="x" c="w-4 h-4"/></button></div></td>
                </tr>)}
              </tbody>
            </table>
            {props.length===0&&<div className="p-12 text-center text-gray-500">Aucune propriété. Cliquez sur "Ajouter" pour commencer.</div>}
          </div>
        </div>}

        {/* Lots management */}
        {tab==='lots'&&<div className="space-y-6">
          <div className="flex items-center justify-between">
            <h2 className="text-2xl font-bold text-gray-900">Lotissements ({lots.length})</h2>
            <Btn ch={<><Ic n="map" c="w-4 h-4"/>Ajouter</>} onClick={()=>sEditLot({})}/>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {lots.map(l=><div key={l.id} className="bg-white rounded-xl shadow-sm overflow-hidden">
              <div className="bg-gradient-to-r from-green-500 to-green-600 p-4 flex items-center justify-between">
                <div><p className="text-white font-bold">{l.loc}</p><p className="text-green-100 text-sm">{l.zone}</p></div>
                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${l.st==='Disponible'?'bg-white/20 text-white':'bg-orange-100 text-orange-700'}`}>{l.st}</span>
              </div>
              <div className="p-4">
                <div className="grid grid-cols-3 gap-4 text-center mb-4">
                  <div><p className="text-xl font-bold">{l.lots}</p><p className="text-xs text-gray-500">Total</p></div>
                  <div><p className="text-xl font-bold text-green-600">{l.dispo}</p><p className="text-xs text-gray-500">Dispo</p></div>
                  <div><p className="text-xl font-bold">{l.su}m²</p><p className="text-xs text-gray-500">Surface</p></div>
                </div>
                <p className="text-amber-600 font-bold mb-4">{(l.pr/1000000).toFixed(1)} M FCFA/lot</p>
                <div className="flex gap-2">
                  <Btn ch="Modifier" v="outline" sz="sm" cl="flex-1" onClick={()=>sEditLot(l)}/>
                  <button onClick={()=>delLot(l.id)} className="p-2 hover:bg-red-100 rounded-lg text-red-600"><Ic n="x" c="w-4 h-4"/></button>
                </div>
              </div>
            </div>)}
          </div>
          {lots.length===0&&<div className="bg-white rounded-xl p-12 text-center text-gray-500">Aucun lotissement. Cliquez sur "Ajouter" pour commencer.</div>}
        </div>}
      </div>
    </div>
  );
};

const Locality=({loc,sP,sS,favs})=>{
  const props=P.filter(p=>p.nb===loc);
  const region=gR(loc);
  const coord=COORDS[loc];
  const mapRef=useRef(null);
  useEffect(()=>{
    if(!mapRef.current||!coord)return;
    const map=L.map(mapRef.current).setView(coord,13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'OpenStreetMap'}).addTo(map);
    props.forEach(p=>{L.marker(coord).addTo(map).bindPopup(`<b>${p.ti}</b><br/>${fP(p.pr,p.tr)}`)});
    return()=>map.remove();
  },[loc]);
  return(<div className="min-h-screen bg-gray-50 pt-24">
    <div className="bg-gradient-to-r from-gray-900 to-gray-800 py-16"><div className="max-w-7xl mx-auto px-4">
      <div className="flex items-center gap-2 text-sm text-gray-400 mb-4"><button onClick={()=>sP('home')} className="hover:text-amber-400">Accueil</button><Ic n="chevR" c="w-4 h-4"/><button onClick={()=>sP('properties')} className="hover:text-amber-400">Biens</button><Ic n="chevR" c="w-4 h-4"/><span className="text-white">{loc}</span></div>
      <h1 className="text-4xl font-bold text-white mb-2">Immobilier à {loc}</h1>
      <p className="text-gray-300">{props.length} bien{props.length>1?'s':''} disponible{props.length>1?'s':''} - Région de {region}</p>
    </div></div>
    <div className="max-w-7xl mx-auto px-4 py-8">
      {coord&&<div className="mb-8 rounded-2xl overflow-hidden shadow-lg" style={{height:'250px'}}><div ref={mapRef} style={{height:'100%',width:'100%'}}/></div>}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {props.map(p=><Card key={p.id} p={p} onV={x=>{sS(x);sP('detail')}} isFav={favs.isFav(p.id)} toggleFav={favs.toggle}/>)}
      </div>
      {props.length===0&&<div className="text-center py-16"><Ic n="building" c="w-16 h-16 text-gray-300 mx-auto mb-4"/><h3 className="text-xl font-semibold text-gray-900 mb-2">Aucun bien disponible à {loc}</h3><Btn ch="Voir tous les biens" onClick={()=>sP('properties')}/></div>}
    </div>
  </div>);
};

// APP
const App=()=>{
  const [pg,sPg]=useState('home');
  const [sel,sSel]=useState(null);
  const [loc,sLoc]=useState(null);
  const favs=useFavs();
  const data=useData();
  const props=data.properties||P;
  useEffect(()=>{window.scrollTo(0,0)},[pg]);
  const goLoc=(l)=>{sLoc(l);sPg('locality')};
  const rP=()=>{
    switch(pg){
      case 'home':return <Home sP={sPg} sS={sSel} favs={favs}/>;
      case 'properties':return <Props sP={sPg} sS={sSel} favs={favs}/>;
      case 'detail':return <Detail p={sel} sP={sPg}/>;
      case 'cooperative':return <Cooperative sP={sPg} lots={data.lots}/>;
      case 'services':return <Serv sP={sPg}/>;
      case 'contact':return <Contact/>;
      case 'locality':return <Locality loc={loc} sP={sPg} sS={sSel} favs={favs}/>;
      case 'admin':return <Admin sP={sPg} data={data}/>;
      default:return <Home sP={sPg} sS={sSel} favs={favs}/>;
    }
  };
  return(<div className="min-h-screen bg-white">
    {pg!=='admin'&&<Header pg={pg} sP={sPg}/>}
    <main>{rP()}</main>
    {pg!=='admin'&&<Footer sP={sPg}/>}
    <button onClick={()=>window.scrollTo({top:0,behavior:'smooth'})} className="fixed bottom-6 right-6 p-3 bg-amber-500 text-white rounded-full shadow-lg hover:bg-amber-600 transition-colors z-30"><Ic n="arrU" c="w-6 h-6"/></button>
  </div>);
};

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>